{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/autoscroll.js","webpack:///./src/chat/Widget.vue","webpack:///./src/chat/ChatBox.vue","webpack:///./src/chat/ChatBox.vue?003a","webpack:///./src/chat/Widget.vue?f445","webpack:///./src/sprite/makeSprites.js","webpack:///./src/chat/index.js","webpack:///./src/store/config.js","webpack:///./src/sprite/Hexes.vue","webpack:///./src/sprite/Nav.vue","webpack:///./src/sprite/Nav.vue?f927","webpack:///./src/sprite/Hexes.vue?4e9e","webpack:///./src/sprite/Pieces.vue","webpack:///../game/help.js","webpack:///../game/tutorial/captions.js","webpack:///../game/tutorial/boards.js","webpack:///../game/pieces.js","webpack:///./src/sprite/Pieces.vue?e90d","webpack:///./src/sprite/index.js","webpack:///./src/router/applyMeta.js","webpack:///./src/views/About.js","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?a655","webpack:///./src/views/ChangeLog.js","webpack:///./src/views/NewGameRedirect.js","webpack:///./src/views/OnlineRoom.vue","webpack:///./src/components/NewGame.vue","webpack:///../game/short_help.js","webpack:///./src/components/RuleList.vue","webpack:///./src/components/Piece.vue","webpack:///./src/components/Piece.vue?788b","webpack:///./src/components/RuleList.vue?ab8d","webpack:///./src/components/NewGame.vue?9470","webpack:///./src/components/Game.vue","webpack:///../game/Board/Geo.js","webpack:///../game/Board/wouldBreakHive.js","webpack:///../game/Board/webs.js","webpack:///../game/Board/moves.js","webpack:///../game/Board/specials.js","webpack:///../game/Board/index.js","webpack:///../game/Board/toRows.js","webpack:///./src/components/Board.vue","webpack:///./src/components/Board.vue?33a7","webpack:///./src/components/HelpText.vue","webpack:///./src/components/HelpText.vue?0792","webpack:///./src/components/NoRules.vue","webpack:///./src/components/NoRules.vue?de5a","webpack:///./src/components/TimeSince.vue","webpack:///./src/components/TimeSince.vue?d80e","webpack:///./src/components/Winner.vue","webpack:///./src/components/Winner.vue?4b08","webpack:///./src/components/Game.vue?1753","webpack:///./src/views/OnlineRoom.vue?b30d","webpack:///./src/views/index.js","webpack:///./src/router/index.js","webpack:///./src/store/room.js","webpack:///./src/store/index.js","webpack:///./src/App.vue","webpack:///./src/components/Nav.vue","webpack:///./src/components/Nav.vue?255c","webpack:///./src/App.vue?eabf","webpack:///./src/components/ImportGame.vue","webpack:///./src/components/ImportGame.vue?7c80","webpack:///./src/components/ExportGame.vue","webpack:///./src/components/ExportGame.vue?9368","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","mounted","el","scrollTo","scrollHeight","dataset","urAutoscrollEnabled","div","document","createElement","urAutoscrollTarget","appendChild","addEventListener","scrollTop","clientHeight","updated","lastElementChild","scrollIntoView","block","behavior","class","error","css","icon","title","collapsed","toggle","room_id","room","disconnected","reconnect_tries","state","user_ids","messages","username","text","submit","ref","onKeyPress","type","props","Number","computed","this","$store","watch","methods","e","preventDefault","send","$refs","textarea","focus","shiftKey","render","components","ChatBox","config","chat_collapsed","ROOM","save","style","install","app","_option","component","Widget","initial","show_help","theme","darkmode","hex_angle","zoom","schema","required","properties","enum","debug","default","ReactiveLocalStorage","LS_KEY","onChange","body","classList","form","SPRITES","reactive","SIZE","LINE_WIDTH","Math","sqrt","fill_map","white2","black2","yellow","green","red","purple","blue","white","black","gray","CLEAR","a","b","bgs","empty","empty_r","empty_g","empty_b","player_1","player_2","_hex","ctx","color","x","y","beginPath","moveTo","cos","sin","PI26","PI","side","lineTo","includes","globalCompositeOperation","fill","fillStyle","base_sprites","thick","thin","dashed","style_radius","toStyle","className","canvas","declaration","toDataURL","replace","img_cache","cacheImage","id","c2","width","height","getContext","drawImage","style_text","entries","map","colors","split","forEach","clearRect","w","translate","rotate","restore","rims","borders","undefined","bg_name","bg","border","cls","classNames","rim","border_color","_w","innerText","head","item","links","link","to","__route","path","SpriteNav","makeSprites","$route","query","themes","piece_list","players","player","u","piece","_trapdoor_spider","_scorpion","_orbweaver","special","_along","queen","emerald_wasp","beetle","grasshopper","cicada","spiderLike","extra","spider","scorpion","orbweaver","trapdoor_spider","ant","ladybug","mosquito","pill_bug","orchid_mantis","kung_fu_mantis","praying_mantis","fly","lanternfly","lanternfly_nymph","wasp","cockroach","_dragonfly","dragonfly_nymph","damselfly","centipede","earthworm","blank","dragonfly","slugs","basics","onehive","stacks","current_player","rules","VANILLA","piece_counts","tags","hive","crawl","stack","all","keys","getAvailable","board","unlimited","used","1","2","piece_types","index","player_id","piece_owners","available","piece_set","pieces","used_pieces","total","count","list","toCheck","captions","help","boards","console","log","views","Hexes","Nav","Pieces","q","from","next","nearestWithTitle","matched","reverse","find","meta","nearestWithMeta","metaTags","Array","querySelectorAll","parentNode","removeChild","tagDef","tag","setAttribute","content","modal","outer","$auth","ready","user","enabled","button","makeGuest","signup","login","api","post","then","refetch","$router","getId","position","zIndex","items","authRequired","params","location","setRules","startGame","is_host","total_pieces","onClick","onHover","hovering","can_start","copyUrl","copied","hovering_lines","empty_text","_stack","_fly","_crawl","_spiderlike","_beetle","piece_lists","irow","getCount","data-count","String","HivePiece","Function","_len","row","sprite","host_text","guest_text","MAX","RuleList","href","host_id","auth","variants","values","reduce","acc","num","short_help","afk","toUpperCase","join","input","select","execCommand","setTimeout","rows","click","selected","player_indicator","winner","no_rules","deleteSelected","alert","danger","info","turn_text","time","last_move_at","mod","geo_cache","getGeo","WH","W","H","Geo","options","xy","floor","indexes","range","AREA","dindexes","0","short","short_dirs","si","di","touching","short_dindexes","setSize","element","preCache","center","xy2index","max_stack","filter","hive_count","hive_map","hive_no","parseInt","geo","touched_index","touched_no","_no","Set","size","web_targets","piece_shows_webs","web","layers","i2","no","getVisible","notEnemyScorpion","source","target","getPlacement","excludes","turn","other_player","player_touching","piece_id","last","index2","stepAlongHive","target_index","left_index","right_index","stepOnHive","stepOffHive","makePaths","subhive","paths","targets","pop","walkPaths","n_steps","flatten","nStepsAlongHive","isTouchingEnemySpider","start_index","webs","starting_webs","owner","checked","locked","moves","t2","i_dir","dindex","noFly","on_index1","on_index2","concat","getSubhive","filters","target2","f","isPlayer","stepOffSubhive","out","final_index","friendly_hive","flyAnywhere","touching_stacks","totals","occupied","stack_index","placements","index3","markChalk","string","chalk","fromEntries","move","i1","selectNearby","wouldBreakHive","args","pullUnder","unshift","snag","snag_targets","snag_index","swap","index1","piece1","piece2","swapBottom","swap_index","i_touching","left","right","willSnag","parity","notMosquito","target_indexes","_default","target_id","target_type","possible_moves","moves_lib","new_args","special_result","undoDragonfly","moved_two","undoMoveUnder","undo","board_cache","PLAYER_COUNT","noop","B","specials","getHash","objectHash","pick","update","hash","can_move","special_args","actions","player_list","piece_type","current_hash","_markBoard","getMoves","getSpecials","can_place","nextPlayer","checkWinner","cantmove","queens","_delete","getUrl","prevPlayer","nextTurn","frozen","toggledCheat","Date","valueOf","unselect","doAction","action_type","new_index","json_fields","toJson","cloneDeep","fromJson","new","is_same","freeze","old_index","redo","isUsersTurn","local_player","queenCheck","message","fail1","fail2","deletePiece","trash_id","winners","_class","r_i","index2xy","sliceBoard","max_x","Infinity","max_y","min_x","min_y","max","min","makeStack","columns","marked","getMarked","show_webs","cell","enemy_webs","selected_webs","_i","columnize","cells","Board","root","ir","ic","data-web","tile","iz","$emit","data-index","data-xy","data-piece_id","emits","PLACEMENT","warning","open","$ui","fmt","toString","padStart","timeout","step","unmounted","clearTimeout","tick","seconds","isNaN","close","can_end","isHost","action","register","cancel","HelpText","HiveBoard","NoRules","TimeSince","Winner","mixins","Mixin","is_local","mousetrap","sync","number","piece_rows","highlight","orientation","toRows","scroll_box","scrollWidth","clientWidth","scroll","toast","Game","NewGame","beforeEnter","About","Home","ChangeLog","NewGameRedirect","OnlineRoom","routes","loadViews","component_name","Component","route","toLowerCase","assign","defaultsDeep","createHistory","createWebHashHistory","router","createRouter","history","beforeEach","applyMeta","TIMEOUTS","SOCKETS","BOARDS","LOCAL_GAME_KEY","client","getClient","current_room","rooms","ui","unrest","store","local","json_data","JSON","parse","game_id","rooom_id","ls","set","watchRoom","protocol","url","host","ws","WebSocket","__ticks","onclose","onmessage","confirm","ticks","game","sendRoom","stringify","remote_actions","diff","action_count","onlyIfLocal","room_store","loadJson","_options","globalProperties","init","nav","section","brand","game_links","placement","help_links","warn","showImportModal","showExportModal","disable","tagName","paste","clipboardData","getData","game_string","cols","copy","json","navigator","clipboard","writeText","configure","AUTH_START","oauth_providers","createApp","App","ImportGame","ExportGame","directive","autoscroll","use","UrVue","plugin","chat","Form","mount"],"mappings":"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D,OACKnM,EADL,oIAKH6N,GAAkB,CACtB,8GACA,iDACA,gIAGIC,GAAY,CAChB1B,GAAO,YAAa,4BADP,sBAEVwB,GAAW,cAFD,CAGb,8EAGIG,GAAY,CAChB3B,GAAO,aACPD,GACE,4HAIE6B,GAAY,CAChB5B,GAAO,aACP,0EACA,mFAGI6B,GAAQ,CAAC,kCAEA,IACb5B,SACAE,UACAC,eACAC,UACAG,UACAI,OACAC,WACAC,YACAC,YACAC,iBACAC,kBACAC,kBACAC,OACAC,cACAC,oBACAC,QACAC,aACAO,UAAWN,GAAW,aACtBE,aACAD,mBACAE,aACAC,aACAC,SACA3B,gBACAO,YACAE,mBACAD,cCzLa,IACbqB,MAAO,CACL,SACA,UACA,SACA,QACA,SACA,YACA,cACA,MACA,SACA,UACA,WACA,WACA,iBACA,gBACA,iBACA,MACA,OACA,WACA,YACA,YACA,YACA,kBACA,YACA,SACA,aACA,mBACA,kBACA,YACA,gBAEFC,OAAQ,CACN,2DACA,qEACA,oEACA,uFACA,sEACA,wFAEFC,QAAS,CACP,yEACA,oFACA,mFAEFC,OAAQ,CACN,sCACA,4EACA,uDAEFjC,MAAO,CACL,sIACA,0DAEFE,OAAQ,CACN,yIACA,qHAEFC,YAAa,CACX,4DACA,0DACA,wGAEFI,OAAQ,CAAC,yEACTI,IAAK,CACH,+DACA,+EAEFC,QAAS,CAAC,mFACVC,SAAU,CACR,wFACA,qJAEFC,SAAU,CACR,kEACA,sEAEFE,eAAgB,CACd,6EACA,4EAEFD,cAAe,CACb,8FACA,yEAEFE,eAAgB,CACd,+IACA,4EAEFC,IAAK,CACH,kDACA,kHAEFV,SAAU,CACR,iEACA,oFAEFa,KAAM,CACJ,iDACA,iDAEFC,UAAW,CACT,mHACA,uFAEFO,UAAW,CACT,sFACA,iJAEFJ,UAAW,CACT,wIACA,gJAEFD,gBAAiB,CACf,+DACA,8FAEFE,UAAW,CACT,mEACA,6DAEFtB,OAAQ,CACN,+DACA,yIAEFe,WAAY,CACV,8DACA,sFAEFC,iBAAkB,CAAC,2DACnBV,gBAAiB,CACf,4FACA,wDACA,6EACA,m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","file":"js/app.4d6dbe48.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/hive.js/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default {\n  mounted(el) {\n    el.scrollTo(0, el.scrollHeight)\n    el.dataset.urAutoscrollEnabled = true\n\n    // need a 0px target element at the bottom of the node\n    const div = document.createElement('div')\n    div.dataset.urAutoscrollTarget = ''\n    el.appendChild(div)\n\n    // disable/enable auto scroll when user scrolls away from or to the end of element\n    el.addEventListener('scroll', () => {\n      const { scrollHeight, scrollTop, clientHeight } = el\n      if (scrollHeight === scrollTop + clientHeight) {\n        el.dataset.urAutoscrollEnabled = true\n      } else {\n        delete el.dataset.urAutoscrollEnabled\n      }\n    })\n  },\n  updated(el) {\n    if (el.dataset.urAutoscrollEnabled) {\n      el.lastElementChild?.scrollIntoView({\n        block: 'end',\n        behavior: 'smooth',\n      })\n    }\n  },\n}\n","<template>\n  <div v-if=\"error\" class=\"ur-chat-error\">\n    <i :class=\"css.icon('exclamation-triangle')\" :title=\"error\" />\n  </div>\n  <div v-else-if=\"collapsed\" class=\"ur-chat-collapsed\" @click=\"toggle\">\n    <i class=\"fa fa-comment\" />\n  </div>\n  <div v-else class=\"ur-chat-widget\">\n    <div class=\"flex flex-col h-full\">\n      <div class=\"menu-bar\">\n        <i :class=\"css.icon('minus cursor-pointer mx-1')\" @click=\"toggle\" />\n      </div>\n      <chat-box :room_id=\"room_id\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\nimport ChatBox from './ChatBox'\n\nexport default {\n  components: { ChatBox },\n  props: {\n    room_id: Number,\n  },\n  data() {\n    return { css }\n  },\n  computed: {\n    collapsed() {\n      return this.$store.config.state.chat_collapsed\n    },\n    room() {\n      return (window.ROOM = this.$store.room.watch(this.room_id))\n    },\n    error() {\n      const { error } = this.room || {}\n      return error && `Unable to connect to server. Offline play only. Error was: ${error}`\n    },\n  },\n  methods: {\n    onKeyPress(e) {\n      e.key === 'Enter' && !e.shiftKey && this.submit(e)\n    },\n    toggle() {\n      this.$store.config.save({ chat_collapsed: !this.collapsed })\n    },\n  },\n}\n</script>\n","<template>\n  <div v-if=\"room\" class=\"ur-chat-box\">\n    <div v-if=\"room.disconnected\">\n      <i class=\"fa fa-exclamation-triangle text-red-700 mr-2\" />\n      Unable to connect to server\n      <br />\n      Will retry every 5 seconds ({{ room.reconnect_tries || 0 }} tries)\n    </div>\n    <div>Players: {{ room.state.user_ids.length }}</div>\n    <div class=\"flex-grow\" />\n    <div class=\"message-list\" v-autoscroll>\n      <p v-for=\"(m, i) in room.messages\" :key=\"i\">\n        {{ `${m.username}: ${m.text}` }}\n      </p>\n    </div>\n    <form @submit=\"submit\" class=\"text-box\">\n      <textarea v-model=\"value\" class=\"input\" ref=\"textarea\" @keypress=\"onKeyPress\" />\n      <button type=\"submit\" :class=\"css.icon('send')\" />\n    </form>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nexport default {\n  props: {\n    room_id: Number,\n  },\n  data() {\n    return { css, value: '' }\n  },\n  computed: {\n    room() {\n      return this.$store.room.watch(this.room_id)\n    },\n  },\n  methods: {\n    submit(e) {\n      e.preventDefault()\n      const { value } = this\n      this.$store.room.send(this.room_id, 'chat', value)\n      this.value = ''\n      this.$refs.textarea.focus()\n    },\n    onKeyPress(e) {\n      e.key === 'Enter' && !e.shiftKey && this.submit(e)\n    },\n  },\n}\n</script>\n","import { render } from \"./ChatBox.vue?vue&type=template&id=4ea1cccf\"\nimport script from \"./ChatBox.vue?vue&type=script&lang=js\"\nexport * from \"./ChatBox.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Widget.vue?vue&type=template&id=015105a5\"\nimport script from \"./Widget.vue?vue&type=script&lang=js\"\nexport * from \"./Widget.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { reactive } from 'vue'\nimport classNames from 'classnames'\n\nexport const SPRITES = reactive([])\n\nlet style\nconst SIZE = 100\nconst LINE_WIDTH = (SIZE * Math.sqrt(3)) / 10 // 10% of height\n\nconst fill_map = {\n  white2: '#FCFBF7', // eggshell lighten 10%\n  black2: '#333',\n  yellow: '#F1C40F',\n  green: '#4a4',\n  red: '#a44',\n  purple: '#84f',\n  blue: '#4af',\n  white: '#F6F3E7', // eggshell lighten 5%\n  black: '#000',\n  gray: 'gray',\n}\n\nconst CLEAR = 'rgba(0, 0, 0, 0)'\nconst a = 128\nconst b = 96\nconst bgs = {\n  empty: `rgba(${a},${a},${a},0.5)`,\n  empty_r: `rgba(${a},${b},${b},0.5)`,\n  empty_g: `rgba(${b},${a},${b},0.5)`,\n  empty_b: `rgba(${b},${b},${a},0.5)`,\n  player_1: fill_map.white2,\n  player_2: fill_map.black2,\n}\n\nconst _hex = (ctx, color, x, y, r) => {\n  ctx.beginPath()\n  ctx.moveTo(x + r * Math.cos(0), y + r * Math.sin(0))\n  const PI26 = (2 * Math.PI) / 6\n\n  for (let side = 0; side < 7; side++) {\n    ctx.lineTo(x + r * Math.cos(side * PI26), y + r * Math.sin(side * PI26))\n  }\n\n  if (color.includes('rgba')) {\n    ctx.globalCompositeOperation = 'destination-out'\n    ctx.fill()\n    ctx.globalCompositeOperation = 'source-over'\n  }\n  ctx.fillStyle = color\n  ctx.fill()\n}\n\nconst base_sprites = {\n  thick: 'white,black,red,blue,purple,yellow,gray,green',\n  thin: 'purple',\n  dashed: 'blue',\n}\n\nconst thin = 1 - 0.05 * Math.sqrt(3)\nconst style_radius = {\n  thin,\n  thick: 1 - 0.1 * Math.sqrt(3),\n  dashed: thin,\n}\n\nconst toStyle = (className, canvas) => {\n  const declaration = `background-image: url(${canvas.toDataURL()})`\n  SPRITES.push(`debug ${className}`)\n\n  return `.${className.replace(/ /g, '.')} { ${declaration} }\\n`\n}\n\nexport default (ref) => {\n  if (ref) {\n    style = null\n  }\n  if (style) {\n    return\n  }\n  const img_cache = {}\n\n  const cacheImage = (id) => {\n    const c2 = document.createElement('canvas')\n    c2.width = canvas.width\n    c2.height = canvas.height\n    c2.getContext('2d').drawImage(canvas, 0, 0)\n    ref?.appendChild(c2)\n    img_cache[id] = c2\n  }\n\n  const canvas = document.createElement('canvas')\n  let style_text = ''\n  ref?.appendChild(canvas)\n  canvas.width = 2 * SIZE\n  canvas.height = Math.sqrt(3) * SIZE\n  const ctx = canvas.getContext('2d')\n  Object.entries(base_sprites).map(([style, colors]) => {\n    colors.split(',').forEach((color) => {\n      ctx.clearRect(0, 0, 2 * SIZE, 2 * SIZE)\n\n      _hex(ctx, fill_map[color], canvas.width / 2, canvas.height / 2, SIZE)\n      if (style_radius[style]) {\n        _hex(ctx, CLEAR, canvas.width / 2, canvas.height / 2, SIZE * style_radius[style])\n      }\n      if (style === 'dashed') {\n        for (let i = 0; i < 6; i++) {\n          const w = canvas.width / 4\n          ctx.translate(canvas.width / 2, canvas.height / 2)\n          ctx.rotate(Math.PI / 3)\n          ctx.translate(-canvas.width / 2, -canvas.height / 2)\n          ctx.clearRect(canvas.width / 2 - w / 2, -1, w, LINE_WIDTH, 0)\n        }\n        ctx.restore()\n      }\n      cacheImage(style + ',' + color)\n    })\n  })\n\n  const rims = {\n    player_1: img_cache['thick,white'],\n    player_2: img_cache['thick,black'],\n  }\n\n  const borders = [undefined, 'green', 'red', 'purple', 'gray', 'yellow', 'blue', 'blue-dashed']\n  Object.entries(bgs).forEach(([bg_name, bg]) =>\n    borders.forEach((border) => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n      _hex(ctx, bg, canvas.width / 2, canvas.height / 2, SIZE)\n      const cls = classNames('hex', 'hex-' + bg_name, border)\n      const rim = rims[bg_name]\n\n      if (rim) {\n        ctx.drawImage(rim, 0, 0)\n      }\n\n      if (border) {\n        const [border_color, style = 'thick'] = border.split('-')\n        ctx.drawImage(img_cache[style + ',' + border_color], 0, 0)\n      }\n\n      style_text += toStyle(cls, canvas)\n\n      const _w = 0.15\n      ctx.drawImage(\n        img_cache['thin,purple'],\n        _w * canvas.width,\n        _w * canvas.height,\n        canvas.width * (1 - 2 * _w),\n        canvas.height * (1 - 2 * _w),\n      )\n      style_text += toStyle(cls + ' purple-inner', canvas)\n    }),\n  )\n  style = document.createElement('style')\n  style.innerText = style_text\n  document.head.appendChild(style)\n}\n","import Widget from './Widget'\n\nexport default {\n  install(app, _option) {\n    app.component('UrChatWidget', Widget)\n  },\n}\n","import { ReactiveLocalStorage } from '@unrest/vue-storage'\n\nconst initial = {\n  show_help: true,\n  theme: 'classic',\n  darkmode: true,\n  hex_angle: 'flat',\n  zoom: '0', // TODO integer zero isn't working here\n\n  // not in schema\n  chat_collapsed: false,\n}\n\nconst schema = {\n  type: 'object',\n  required: ['theme'],\n  properties: {\n    darkmode: {\n      title: 'Dark Mode',\n      type: 'boolean',\n    },\n    theme: {\n      title: 'Theme',\n      type: 'string',\n      enum: ['classic', 'carbon'],\n    },\n    debug: {\n      title: 'Show space numbers',\n      type: 'boolean',\n    },\n    show_help: {\n      type: 'boolean',\n      title: 'Show Help',\n      default: true,\n    },\n    hex_angle: {\n      type: 'string',\n      title: 'Hex Angle',\n      enum: ['flat', 'pointy'],\n    },\n    zoom: {\n      type: 'integer',\n      title: 'Zoom',\n      // enum: ZoomInput.enum,\n    },\n  },\n}\n\nexport default () => {\n  const config = ReactiveLocalStorage({ LS_KEY: 'config', initial })\n  config.schema = schema\n  const { state, save } = config\n  const onChange = (data) => {\n    save(data)\n    const { darkmode } = state\n    document.body.classList[darkmode ? 'add' : 'remove']('theme-dark_mode')\n  }\n  config.form = { schema, state, onChange }\n  document.body.classList[state.darkmode ? 'add' : 'remove']('theme-dark_mode')\n  return config\n}\n","<template>\n  <div class=\"sprite-view\">\n    <sprite-nav />\n    This is a page for viewing the sprites. These are generated every time the browser loads and are\n    used as the background for <code>.hex</code> elements\n    <div class=\"sprite-box flex flex-wrap\">\n      <div v-for=\"item in SPRITES\" :class=\"item\" :key=\"item\" />\n    </div>\n    <div ref=\"debug\" />\n  </div>\n</template>\n\n<script>\nimport makeSprites, { SPRITES } from './makeSprites'\nimport SpriteNav from './Nav'\n\nexport default {\n  components: { SpriteNav },\n  __route: {\n    path: '/sprite/hexes/',\n  },\n  data: () => ({ SPRITES }),\n  mounted() {\n    makeSprites(this.$route.query.debug && this.$refs.debug)\n  },\n}\n</script>\n","<template>\n  <div className=\"w-full flex m-4\">\n    <div v-for=\"link in links\" :key=\"link\" class=\"btn -link\">\n      <router-Link :to=\"`/sprite/${link}/`\">{{ link }}</router-Link>\n    </div>\n  </div>\n</template>\n\n<script>\nconst links = ['pieces', 'hexes']\n\nexport default {\n  __route: { path: '/sprite/' },\n  data() {\n    return { links }\n  },\n}\n</script>\n","import { render } from \"./Nav.vue?vue&type=template&id=ad4a466e\"\nimport script from \"./Nav.vue?vue&type=script&lang=js\"\nexport * from \"./Nav.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Hexes.vue?vue&type=template&id=7d3413dd\"\nimport script from \"./Hexes.vue?vue&type=script&lang=js\"\nexport * from \"./Hexes.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"sprite-view\">\n    <sprite-nav />\n    <div v-for=\"theme in themes\" :key=\"theme\">\n      <h2>{{ theme || 'No Theme' }}</h2>\n      <div :class=\"`flex flex-wrap ${theme}`\">\n        <div v-for=\"name in piece_list\" :key=\"name\">\n          <div v-for=\"player in players\" class=\"relative dummy_piece\" :key=\"player\">\n            <div :class=\"`piece hex hex-${player} type type-${name}`\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport makeSprites from './makeSprites'\nimport SpriteNav from './Nav'\nimport pieces from 'hive.js/pieces'\n\nconst players = ['player_1', 'player_2']\nconst themes = ['', 'theme-carbon']\n\nexport default {\n  __route: {\n    path: '/sprite/pieces/',\n  },\n  components: { SpriteNav },\n  data: () => ({ players, themes, piece_list: pieces.list }),\n  mounted() {\n    makeSprites()\n  },\n}\n</script>\n","const u = (piece) => piece.replace('_', ' ')\n\nconst _trapdoor_spider = (p) =>\n  `The ${u(p)} must stop moving if it moves next to an enemy trapdoor spider.`\nconst _scorpion = (p) => `The ${u(p)} cannot stack on top of an enemy scorpion.`\nconst _orbweaver = (p) => `The ${u(p)} cannot pass over an orbweaver.`\n\nconst special = (l) => l\n\nconst _along = (s, e = '') => `The ${u(s)} can move one space along the hive${e}.`\nconst _spider = (s, e = '') => `The ${u(s)} must crawl exactly 3 spaces along the hive${e}.`\nconst queen = [_along('queen')]\n\nconst emerald_wasp = [\n  'If starting on the ground, the emerald wasp can take two steps on top of the hive',\n  'If starting on the hive, the emrald wasp can step off the hive',\n  _orbweaver('emerald_wasp'),\n  _scorpion('emerald_wasp'),\n]\n\nconst beetle = [\n  _along('beetle', ' or step on the hive'),\n  'If starting on the hive, it can move in any direction on or off the hive.',\n  _scorpion('beetle'),\n]\n\nconst grasshopper = [\n  'Grassshopers fly over the hive in a straight line.',\n  _orbweaver('grasshopper'),\n]\n\nconst cicada = [\n  'The cicada jumps over the hive in a straight line as many times as you want.',\n  _orbweaver('cicada'),\n  _trapdoor_spider('cicada'),\n]\n\nconst spiderLike = (piece, extra = []) => [\n  `The ${u(piece)} must crawl exactly 3 spaces along the hive.`,\n  `The ${u(piece)} can jump over exactly 1 tile except for an orbweaver.`,\n  // _trapdoor_spider(piece),\n  ...extra,\n]\n\nconst spider = spiderLike('spider')\nconst scorpion = spiderLike('scorpion', ['No piece can stack on top of an enemy scorpion.'])\nconst orbweaver = spiderLike('orbweaver', ['Pieces cannot fly over an orbweaver.'])\nconst trapdoor_spider = spiderLike('trapdoor_spider', [\n  'The trapdoor spider will stop any piece that tries to crawl past it.',\n  'The trapdoor spider cannot not stop a piece which started next to it.',\n])\n\nconst ant = [\n  'The ant can move an unlimited amount of spaces around the hive.',\n  _trapdoor_spider('ant'),\n]\n\nconst ladybug = [\n  'The ladybug must take two steps on the hive and then step off the hive.',\n  _trapdoor_spider('ladybug'),\n]\n\nconst mosquito = [\n  'The mosquito copies the movement of any (top most) adjacent bug at the start of its turn.',\n  'If the mosquito starts on top of the hive, it moves like a beetle for that turn.',\n]\n\nconst pill_bug = [\n  _along('pill_bug'),\n  special(\n    'The pill bug can move an adjacent piece or stack to an empty adjacent space as long as the one-hive rule is not broken by removing the piece.',\n  ),\n]\n\nconst orchid_mantis = [\n  _along('orchid mantis', ' if on the ground level'),\n  'If on the ground level, the orchid mantis can grab an ajacent piece and move it underneath the orchid mantis.',\n  'Once on the hive the orchid mantis can move one space on the hive or step off the hive.',\n  'The orchid mantis cannot stack on or grab an enemy scorpion.',\n]\n\nconst kung_fu_mantis = [\n  'If on the ground level, the kung fu mantis can grab a piece two spaces in any direction and move it underneath the kung fu mantis.',\n  'Once on the hive the kung fu mantis can move one space on the hive or step off the hive.',\n  'The kung fu mantis cannot stack on or grab an enemy scorpion.',\n]\n\nconst praying_mantis = [\n  'If starting on the ground, the praying mantis leaps in any direction and lands on the furthest piece.',\n  'It cannot leap over any breaks in the hive',\n  'If the mantis encounters any stacks while leaping, it will carry the top most piece with it.',\n  'If starting on top of a stack, the mantis can only step off the stack onto the ground.',\n  _orbweaver('praying_mantis'),\n  _scorpion('praying_mantis'),\n]\n\nconst fly = [\n  'If on the ground, the fly can step on the hive.',\n  'Once on the hive, the fly take any number of steps on the hive, and then step off the hive.',\n  _orbweaver('fly'),\n  _scorpion('fly'),\n]\n\nconst lanternfly = [\n  _along('lanternfly'),\n  'If surounded on 3 or more sides, the lanternfly can move over the hive to any unoccupied tile on the board.',\n]\n\nconst lanternfly_nymph = [\n  _along('lanternfly_nymph'),\n  'The lanternfly nymph can move over the hive to any unoccupied space which is surrounded on 3 or more sides.',\n]\n\nconst wasp = [\n  'The wasp takes unlimited steps on top of the hive and then steps off to any space not touching friendly tiles (opposite of placement).',\n  _orbweaver('wasp'),\n]\n\nconst cockroach = [\n  'The cockroach must step on the hive, move any number of spaces on the hive, then step on the ground.',\n  'However, it cannot step over enemy tiles or friendly orbweavers.',\n  _orbweaver('cockroach'),\n]\n\nconst _dragonfly = (p) => [\n  `The ${p} moves along diagonals (one step forward then one step left or right).`,\n  special(\n    `If the ${p} moves to an empty space, it will carry the piece under it to the new space (as long as it does not break the one-hive rule).`,\n  ),\n]\n\nconst dragonfly_nymph = [\n  'If on the ground, this can grab any piece one diagonal away (one step forward then one step left or right).',\n  'If on the hive, this piece moves on diagonals.',\n  'If it moves to an empty space it will carry the piece immediately under it (as long as it does not break the one hive rule).',\n]\n\nconst damselfly = [\n  _along('damselfly', ' if on the ground level'),\n  ..._dragonfly('damselfly'),\n  '(this piece is identical to the dragonfly, but it can move on the ground)',\n]\n\nconst centipede = [\n  _along('centipede'),\n  special(\n    'The centipede can swap spaces with an adjacent piece as long as removing both pieces would not break the one-hive rule.',\n  ),\n]\n\nconst earthworm = [\n  _along('earthworm'),\n  'The earthworm can swap with the bottom piece of any stack 3 tiles away.',\n  'Removing the bottom piece of a 2+ piece stack will not break the one hive rule.',\n]\n\nconst blank = ['An inert tile that cannot move']\n\nexport default {\n  queen,\n  beetle,\n  grasshopper,\n  cicada,\n  spider,\n  ant,\n  ladybug,\n  mosquito,\n  pill_bug,\n  orchid_mantis,\n  kung_fu_mantis,\n  praying_mantis,\n  fly,\n  lanternfly,\n  lanternfly_nymph,\n  wasp,\n  cockroach,\n  dragonfly: _dragonfly('dragonfly'),\n  damselfly,\n  dragonfly_nymph,\n  centipede,\n  earthworm,\n  blank,\n  emerald_wasp,\n  scorpion,\n  trapdoor_spider,\n  orbweaver,\n}\n","export default {\n  slugs: [\n    'basics',\n    'onehive',\n    'stacks',\n    'queen',\n    'beetle',\n    'earthworm',\n    'grasshopper',\n    'ant',\n    'spider',\n    'ladybug',\n    'mosquito',\n    'pill_bug',\n    'kung_fu_mantis',\n    'orchid_mantis',\n    'praying_mantis',\n    'fly',\n    'wasp',\n    'scorpion',\n    'cockroach',\n    'dragonfly',\n    'damselfly',\n    'dragonfly_nymph',\n    'centipede',\n    'cicada',\n    'lanternfly',\n    'lanternfly_nymph',\n    'trapdoor_spider',\n    'orbweaver',\n    'emerald_wasp',\n  ],\n  basics: [\n    'To start, each player places a piece next to each other.',\n    'Each turn a player can either *place* one piece or move one piece.',\n    'The goal of the game is to surround the enemy queen on all sides.',\n    'Pieces can only be placed next to a friendly piece (except for the first two turns).',\n    'Other than during the placing phase, every piece moves differently.',\n    'Clicking on a piece shows all possible moves (even if it is the other players turn).',\n  ],\n  onehive: [\n    'Each piece moves differently, but the board must always be \"one hive\".',\n    'A piece cannot move if moving that piece would break the hive (even temporarily).',\n    'Pieces that cannot move or be moved without violating this rule are grayed out.',\n  ],\n  stacks: [\n    'Some pieces can move onto the hive.',\n    'For placing or similar purposes, only the color of the top piece matters.',\n    'Only the top piece on a stack can move or be moved.',\n  ],\n  queen: [\n    'From this position, the white queen can move to one of two spaces. It cannot move between the beetle and ant because it cannot fit.',\n    'The black queen cannot move without breaking the hive.',\n  ],\n  beetle: [\n    'From on top of the hive, the white beetle can step down to one of four spaces or continue on the hive by moving onto one of two tiles.',\n    'From the ground, the black beetle can step along the hive or step on the hive for a total of five possible moves.',\n  ],\n  grasshopper: [\n    'The black grasshopper can move to three different spaces.',\n    'The white grasshopper can move to two different spaces.',\n    'With super_grasshopper turned on the black and white pieces can move to 6 and 7 spaces respectively.',\n  ],\n  spider: ['From this position, the white spider can move to one of three spaces.'],\n  ant: [\n    'Normally, both ants can move to any open space on the board.',\n    'If spiderwebs are enabled, the black ant can get trapped on the far spider.',\n  ],\n  ladybug: ['The black ladybug can move to one of five open spaces, the white ladybug eight.'],\n  mosquito: [\n    'From this position, the black mosquito can move as a scorpion, queen, or grasshopper.',\n    'On top of the hive, the white mosquito moves like a beetle. It cannot step on the scorpion because have you ever stepped on a scorpion? It hurts.',\n  ],\n  pill_bug: [\n    'From this position, the pill bug can move to one of two spaces.',\n    'Alternatively, it can move the white queen to one of three spaces.',\n  ],\n  kung_fu_mantis: [\n    'From on top the hive, the black mantis can take one step in any direction.',\n    'From the ground, the white mantis can pull the black queen under itself.',\n  ],\n  orchid_mantis: [\n    'The white orchid mantis cannot move, but it can pull the queen or grasshopper under itself.',\n    'From on top of the hive, the black orchid mantis moves like a beetle.',\n  ],\n  praying_mantis: [\n    'The white praying mantis can move onto the white ant or black queen. If it moves onto the white queen it will move the white beetle as well.',\n    'From on top of the hive, the black praying mantis can step off the hive.',\n  ],\n  fly: [\n    'The white fly can climb onto one of two pieces.',\n    'From on top of the hive, the black fly can move to any ground level space (except those blocked by scorpions).',\n  ],\n  scorpion: [\n    'From this position the scorpion can move to one of two spaces.',\n    'The beetle and grasshopper have their moves restricted by the adjacent scorpion.',\n  ],\n  wasp: [\n    'The black wasp can move to one of four spaces.',\n    'The white wasp can move to one of six spaces.',\n  ],\n  cockroach: [\n    'The black cockroach can step on any adjacent black piece, and then off the hive for a total of 8 possible moves.',\n    'The white cockroach is blocked by the enemy beetle and fly, and cannot move at all.',\n  ],\n  dragonfly: [\n    'The black dragonfly can move to one of three spaces. It cannot land on the scorpion',\n    'The white dragonfly has six possible moves. If it moves to one of the three unoccupied spaces, it must move the spider its on top of as well.',\n  ],\n  damselfly: [\n    'The black damselfly can move along the hive to one of two spaces or diagonally to one of three spaces. It cannot land on the scorpion',\n    'The white damselfly has six possible moves. If it moves to one of the five unoccupied spaces, it must move the spider its on top of as well.',\n  ],\n  dragonfly_nymph: [\n    'The black dragonfly nymph can pull the white queen under it.',\n    'From on top the hive, the white dragonfly nymph can move diagonally to 5 different spaces.',\n  ],\n  centipede: [\n    'From this position, the centipede can move to one of two spaces.',\n    'Alternatively, it can switch places with the grasshopper.',\n  ],\n  cicada: [\n    'The black cicada can make one move by jumping over the hive.',\n    'The white cicada can jump over the ant or jump over the white queen, black queen, and black cicada (stopping anywhere along the way).',\n  ],\n  lanternfly: [\n    'The white laternfly can move one space in either direction.',\n    'Surrounded on 3 sides, the black lantern fly can move over the hive to any square.',\n  ],\n  lanternfly_nymph: ['Either lanternfly nymph can move to 4 different spaces.'],\n  trapdoor_spider: [\n    'The white trapdoor spider has 3 possible hop over 4 tiles or move 3 tiles along the hive.',\n    'The black trapdoor spider cannot move (one hive rule)',\n    'If either cicada lands next to the enemy trapdoor spider, it stops moving.',\n    'The white ant cannot move past the black spider.',\n    'The black ant starts touching the white spider, so it cannot get trapped by its webs.',\n  ],\n  orbweaver: ['Every piece is in some way limited by both friendly and enemy orbweavers.'],\n  emerald_wasp: [\n    'The black emerald wasp move onto two spaces (by first stepping on the white emerald wasp).',\n    'The whiet emerald wasp can step off the hive to three different spaces.',\n  ],\n  earthworm: ['Both earthworms can swap with 4 different pieces.'],\n}\n","/* eslint-disable */\n// not linting becauset his file should mostly be treated like binary\n\nexport default {\n  queen: {\"W\":8,\"H\":6,\"stacks\":{\"18\":[2],\"20\":[4],\"25\":[7],\"27\":[5],\"29\":[1],\"35\":[3],\"36\":[6],\"37\":[0]},\"piece_types\":[\"queen\",\"beetle\",\"queen\",\"ant\",\"spider\",\"ant\",\"ant\",\"grasshopper\"],\"piece_owners\":[1,2,2,2,1,1,1,2],\"turn\":20,\"rules\":{}, \"current_player\": 1},\n  beetle: {\"W\":6,\"H\":5,\"stacks\":{\"8\":[1],\"13\":[0,2],\"14\":[6],\"15\":[5],\"20\":[3],\"21\":[4]},\"piece_types\":[\"grasshopper\",\"queen\",\"beetle\",\"queen\",\"grasshopper\",\"beetle\",\"grasshopper\"],\"piece_owners\":[2,2,1,1,1,2,2],\"turn\":9,\"rules\":{}, \"current_player\": 2},\n  grasshopper: {\"W\":8,\"H\":4,\"stacks\":{\"10\":[2],\"11\":[0],\"12\":[1],\"18\":[4],\"19\":[3],\"20\":[5],\"21\":[6]},\"piece_types\":[\"queen\",\"beetle\",\"grasshopper\",\"ant\",\"queen\",\"spider\",\"grasshopper\"],\"piece_owners\":[2,2,2,1,1,1,1],\"turn\":9,\"rules\":{}, \"current_player\": 2},\n  spider: {\"W\":8,\"H\":6,\"stacks\":{\"19\":[0],\"20\":[1],\"26\":[5],\"27\":[3],\"28\":[4],\"29\":[2]},\"piece_types\":[\"spider\",\"beetle\",\"queen\",\"queen\",\"beetle\",\"grasshopper\"],\"piece_owners\":[1,1,1,2,2,2],\"turn\":13,\"rules\":{}, \"current_player\": 2},\n  ant: {\"W\":8,\"H\":6,\"stacks\":{\"12\":[7],\"18\":[5],\"20\":[1],\"25\":[6],\"27\":[2],\"28\":[4],\"29\":[0],\"35\":[8],\"37\":[3]},\"piece_types\":[\"ant\",\"spider\",\"grasshopper\",\"grasshopper\",\"grasshopper\",\"spider\",\"queen\",\"queen\",\"ant\"],\"piece_owners\":[2,1,1,2,2,1,1,2,1],\"turn\":42,\"rules\":{}, \"current_player\": 1},\n  ladybug: {\"W\":6,\"H\":5,\"stacks\":{\"7\":[0],\"9\":[5],\"10\":[8],\"13\":[1],\"14\":[2],\"15\":[4],\"16\":[6],\"19\":[7],\"20\":[3]},\"piece_types\":[\"ladybug\",\"grasshopper\",\"beetle\",\"queen\",\"mosquito\",\"queen\",\"spider\",\"ant\",\"ladybug\"],\"piece_owners\":[2,1,1,1,2,2,1,2,1],\"turn\":10,\"rules\":{}, \"current_player\": 1},\n  mosquito: {\"W\":6,\"H\":6,\"stacks\":{\"14\":[0],\"15\":[3],\"16\":[5],\"20\":[1,6],\"21\":[2],\"22\":[4]},\"piece_types\":[\"scorpion\",\"queen\",\"grasshopper\",\"mosquito\",\"beetle\",\"queen\",\"mosquito\"],\"piece_owners\":[2,1,1,2,1,2,1],\"turn\":16,\"rules\":{}, \"current_player\": 1},\n  pill_bug: {\"W\":6,\"H\":6,\"stacks\":{\"8\":[4],\"14\":[3],\"15\":[5],\"19\":[0],\"20\":[2],\"25\":[1]},\"piece_types\":[\"pill_bug\",\"queen\",\"spider\",\"grasshopper\",\"queen\",\"ant\"],\"piece_owners\":[1,1,1,2,2,2],\"turn\":8,\"rules\":{},\"current_player\": 1},\n  orchid_mantis: {\"W\":8,\"H\":6,\"stacks\":{\"11\":[5,6],\"12\":[3],\"20\":[2],\"21\":[4],\"27\":[0],\"28\":[1],\"35\":[7]},\"piece_types\":[\"orchid_mantis\",\"queen\",\"beetle\",\"queen\",\"ant\",\"ant\",\"orchid_mantis\",\"grasshopper\"],\"piece_owners\":[1,1,2,2,2,1,2,1],\"turn\":9,\"rules\":{}, \"current_player\": 2},\n  fly: {\"W\":50,\"H\":50,\"stacks\":{\"1176\":[6],\"1225\":[5],\"1227\":[8],\"1273\":[4],\"1274\":[0,2],\"1275\":[1],\"1276\":[3],\"1277\":[7]},\"piece_types\":[\"queen\",\"queen\",\"fly\",\"orchid_mantis\",\"wasp\",\"fly\",\"wasp\",\"scorpion\",\"scorpion\"],\"piece_owners\":[1,2,2,2,1,1,1,2,1],\"turn\":14,\"rules\":{},\"current_player\":1},\n  scorpion: {\"W\":6,\"H\":5,\"stacks\":{\"8\":[2],\"13\":[1],\"15\":[3],\"16\":[5],\"19\":[0],\"21\":[4],\"22\":[6]},\"piece_types\":[\"queen\",\"spider\",\"beetle\",\"queen\",\"grasshopper\",\"beetle\",\"scorpion\"],\"piece_owners\":[1,1,2,2,2,2,1],\"turn\":11,\"rules\":{}, \"current_player\": 2},\n  wasp: {\"W\":6,\"H\":6,\"stacks\":{\"8\":[1],\"13\":[0],\"14\":[2],\"15\":[4],\"19\":[3],\"20\":[5],\"25\":[6]},\"piece_types\":[\"ant\",\"queen\",\"wasp\",\"queen\",\"wasp\",\"beetle\",\"grasshopper\"],\"piece_owners\":[2,2,2,1,1,1,2],\"turn\":8,\"rules\":{}, \"current_player\": 1},\n  dragonfly: {\"W\":6,\"H\":5,\"stacks\":{\"7\":[7],\"8\":[3],\"14\":[1,0],\"15\":[4],\"19\":[6],\"20\":[2],\"21\":[5]},\"piece_types\":[\"dragonfly\",\"spider\",\"queen\",\"scorpion\",\"queen\",\"beetle\",\"dragonfly\",\"spider\"],\"piece_owners\":[1,1,1,2,2,2,2,1],\"turn\":14,\"rules\":{}, \"current_player\": 1},\n  damselfly: {\"W\":6,\"H\":5,\"stacks\":{\"7\":[7],\"8\":[3],\"14\":[1,0],\"15\":[4],\"19\":[6],\"20\":[2],\"21\":[5]},\"piece_types\":[\"damselfly\",\"spider\",\"queen\",\"scorpion\",\"queen\",\"beetle\",\"damselfly\",\"spider\"],\"piece_owners\":[1,1,1,2,2,2,2,1],\"turn\":14,\"rules\":{}, \"current_player\": 1},\n  dragonfly_nymph: {\"actions\":[],\"W\":50,\"H\":50,\"stacks\":{\"1225\":[4],\"1273\":[2],\"1274\":[3,0],\"1275\":[1],\"1323\":[5]},\"piece_types\":[\"dragonfly_nymph\",\"dragonfly_nymph\",\"queen\",\"queen\",\"lanternfly_nymph\",\"centipede\"],\"piece_owners\":[1,2,1,2,2,1],\"hash\":\"cb6ca89c583ff67546d37a5b4453bf1b714fe20e\",\"turn\":7,\"rules\":{},\"last\":{\"to\":1323},\"current_player\":2},\n  centipede: {\"W\":6,\"H\":6,\"stacks\":{\"10\":[6],\"14\":[4],\"15\":[3,5],\"20\":[0],\"21\":[2],\"27\":[1]},\"piece_types\":[\"queen\",\"grasshopper\",\"centipede\",\"ant\",\"ladybug\",\"beetle\",\"queen\"],\"piece_owners\":[1,1,2,2,2,1,2],\"turn\":10,\"rules\":{}, \"current_player\": 1},\n  cockroach: {\"W\":8,\"H\":6,\"stacks\":{\"12\":[3],\"14\":[6],\"18\":[1],\"19\":[2],\"20\":[5],\"21\":[4,7],\"27\":[0]},\"piece_types\":[\"queen\",\"cockroach\",\"beetle\",\"queen\",\"fly\",\"ant\",\"cockroach\",\"beetle\"],\"piece_owners\":[1,1,2,2,2,1,2,1],\"hash\":0.5479472595173172,\"turn\":20,\"rules\":{}, \"current_player\": 1},\n  cicada: {\"actions\":[],\"W\":50,\"H\":50,\"stacks\":{\"1226\":[3],\"1273\":[2],\"1274\":[0],\"1275\":[1],\"1323\":[4]},\"piece_types\":[\"queen\",\"queen\",\"cicada\",\"cicada\",\"ant\"],\"piece_owners\":[1,2,1,2,1],\"hash\":\"21f05bca4e8cc4257c4de80ac6dfdd6aaa971ec0\",\"turn\":5,\"rules\":{\"pieces\":{\"beetle\":2,\"ant\":3,\"centipede\":1,\"cockroach\":1,\"cicada\":2}},\"current_player\":2},\n  lanternfly: {\"W\":50,\"H\":50,\"stacks\":{\"1222\":[6],\"1225\":[5],\"1226\":[7],\"1273\":[2],\"1274\":[0],\"1275\":[1],\"1276\":[3],\"1323\":[4]},\"piece_types\":[\"queen\",\"beetle\",\"beetle\",\"queen\",\"lanternfly\",\"ant\",\"cicada\",\"lanternfly\"],\"piece_owners\":[1,2,1,2,1,2,1,2],\"hash\":\"c3ebd4ae845992bc447b61ee23449c23cfd8ea41\",\"turn\":8,\"rules\":{\"pieces\":{\"beetle\":2,\"ant\":3,\"lanternfly\":1,\"centipede\":1,\"cockroach\":1,\"cicada\":2}},\"current_player\":1},\n  lanternfly_nymph: {\"actions\":[],\"W\":50,\"H\":50,\"stacks\":{\"1223\":[8],\"1226\":[5],\"1273\":[2],\"1274\":[0],\"1275\":[1],\"1276\":[3],\"1323\":[4],\"1324\":[6],\"1326\":[7]},\"piece_types\":[\"pill_bug\",\"mosquito\",\"queen\",\"pill_bug\",\"lanternfly_nymph\",\"lanternfly_nymph\",\"centipede\",\"queen\",\"orchid_mantis\"],\"piece_owners\":[1,2,1,2,1,2,1,2,1],\"hash\":\"3e89a125b257082f0a7cd6687cec8c0303eab5d3\",\"turn\":16,\"rules\":{},current_player: 1},\n  trapdoor_spider: {\"W\":50,\"H\":50,\"stacks\":{\"1226\":[6],\"1274\":[0],\"1275\":[1],\"1276\":[3],\"1277\":[5],\"1323\":[4],\"1325\":[2],\"1327\":[7]},\"piece_types\":[\"trapdoor_spider\",\"trapdoor_spider\",\"queen\",\"queen\",\"cicada\",\"ant\",\"ant\",\"cicada\"],\"piece_owners\":[1,2,1,2,1,2,1,2],\"rules\": {},\"current_player\":2},\n  orbweaver: {\"actions\":[],\"W\":50,\"H\":50,\"stacks\":{\"1174\":[10,8],\"1176\":[5],\"1222\":[12],\"1225\":[3],\"1272\":[6],\"1273\":[2],\"1274\":[0],\"1275\":[1],\"1276\":[7],\"1325\":[11],\"1322\":[9],\"1323\":[4]},\"piece_types\":[\"orbweaver\",\"grasshopper\",\"grasshopper\",\"orbweaver\",\"queen\",\"queen\",\"wasp\",\"fly\",\"fly\",\"trapdoor_spider\",\"trapdoor_spider\",\"cockroach\",\"cockroach\"],\"piece_owners\":[1,2,1,2,1,2,1,2,1,2,1,2,1],\"turn\":18,\"rules\":{},\"last\":{\"from\":1226,\"to\":1277},\"current_player\":1,\"last_move_at\":1604858870793},\n  praying_mantis: {\"W\":50,\"H\":50,\"stacks\":{\"1225\":[5],\"1273\":[6],\"1274\":[0,4],\"1275\":[1],\"1276\":[7,3],\"1323\":[2]},\"piece_types\":[\"queen\",\"queen\",\"praying_mantis\",\"praying_mantis\",\"beetle\",\"fly\",\"ant\",\"beetle\"],\"piece_owners\":[1,2,1,2,1,2,1,2],\"turn\":14,\"last\":{\"from\":1325,\"special\":1276},\"current_player\":1, rules: {}},\n  emerald_wasp: {\"W\":50,\"H\":50,\"stacks\":{\"1225\":[5],\"1273\":[2],\"1274\":[0],\"1275\":[1,4],\"1276\":[3]},\"piece_types\":[\"beetle\",\"beetle\",\"queen\",\"queen\",\"emerald_wasp\",\"emerald_wasp\"],\"piece_owners\":[1,2,1,2,1,2],\"turn\":7,\"rules\":{},\"current_player\": 2},\n  kung_fu_mantis: {\"W\":50,\"H\":50,\"stacks\":{\"1224\":[7],\"1225\":[4,3],\"1274\":[0],\"1275\":[1],\"1276\":[5],\"1323\":[6],\"1324\":[2],\"1325\":[8]},\"piece_types\":[\"queen\",\"queen\",\"ant\",\"kung_fu_mantis\",\"grasshopper\",\"ant\",\"kung_fu_mantis\",\"ladybug\",\"ladybug\"],\"piece_owners\":[1,2,1,2,1,2,1,1,2],\"turn\":13,\"rules\":{},\"current_player\":2},\n  earthworm: {\"actions\":[],\"W\":50,\"H\":50,\"stacks\":{\"1223\":[8],\"1225\":[3],\"1226\":[7],\"1273\":[0,6],\"1274\":[2],\"1275\":[1],\"1276\":[5],\"1323\":[4]},\"piece_types\":[\"centipede\",\"pill_bug\",\"queen\",\"earthworm\",\"earthworm\",\"dragonfly\",\"beetle\",\"queen\",\"lanternfly_nymph\"],\"piece_owners\":[1,2,1,2,1,2,1,2,1],\"hash\":\"1d4cc628d73f7cc48ab20a7b3a4800f37e13b3f3\",\"turn\":16,\"rules\":{},\"current_player\":1},\n}","import help from './help'\nimport captions from './tutorial/captions'\nimport boards from './tutorial/boards'\n\nconst VANILLA = {\n  beetle: 2,\n  grasshopper: 3,\n  ant: 3,\n  spider: 2,\n}\n\nconst piece_counts = {\n  queen: 1,\n  ...VANILLA,\n  // expansion\n  ladybug: 1,\n  mosquito: 1,\n  pill_bug: 1,\n\n  // boardgamegeeks\n  orchid_mantis: 2,\n  fly: 3,\n  wasp: 3,\n  dragonfly: 1,\n  cockroach: 1,\n  centipede: 1,\n  scorpion: 2,\n\n  // hive.js\n  trapdoor_spider: 2,\n  orbweaver: 2,\n  cicada: 3,\n  lanternfly: 3,\n  lanternfly_nymph: 3,\n  earthworm: 1,\n  damselfly: 1,\n  dragonfly_nymph: 2,\n  praying_mantis: 1,\n  emerald_wasp: 1,\n  kung_fu_mantis: 1,\n}\n\n// currently not used, colors are stored on svg\nconst colors = {\n  ant: '#0088e6',\n  beetle: '#b95cb9',\n  centipede: '#b98900',\n  cicada: '#4b9400', //  copies grasshopper\n  cockroach: '#b95c2b',\n  dragonfly: '#e62b00',\n  dragonfly_nymph: '#e62b00',\n  damselfly: '#e67000',\n  earthworm: '#dc5797',\n  fly: '#2a5c00',\n  grasshopper: '#4b9400',\n  ladybug: '#b90000',\n  lanternfly: '#ac3a3a',\n  lanternfly_nymph: '#ac3a3a',\n  orchid_mantis: '#008b5c',\n  orbweaver: '#900000',\n  praying_mantis: '#008b5c',\n  mosquito: '#8a8a8a',\n  pill_bug: '#005cb9',\n  scorpion: '#5c008b',\n  spider: '#5c2900',\n  trapdoor_spider: '#5c2900', // copies spider for now\n  queen: '#e6b900',\n  wasp: '#e62b8b',\n  emerald_wasp: '#43b38c',\n  kung_fu_mantis: '#aa3355',\n}\n\nconst tags = {\n  hive: ['beetle', 'grasshopper', 'ant', 'spider', 'ladybug', 'mosquito', 'pill_bug'],\n  crawl: ['trapdoor_spider', 'spider', 'cicada', 'ant'],\n  fly: [\n    'orbweaver',\n    'lanternfly',\n    'fly',\n    'wasp',\n    'cockroach',\n    'grasshopper',\n    'cicada',\n    'ladybug',\n    'praying_mantis',\n  ],\n  stack: ['scorpion', 'beetle', 'orchid_mantis', 'praying_mantis', 'dragonfly', 'damselfly'],\n  special: ['mosquito', 'centipede', 'pillbug', 'earthworm'],\n  all: Object.keys(piece_counts),\n}\n\nconst getAvailable = (board) => {\n  const { unlimited } = board.rules\n  const used = {\n    1: {},\n    2: {},\n  }\n  board.piece_types.forEach((type, index) => {\n    const player_id = board.piece_owners[index]\n    used[player_id][type] = (used[player_id][type] || 0) + 1\n  })\n\n  const available = []\n  const piece_set = { blank: 0, queen: 1, ...board.rules.pieces }\n\n  Object.entries(used).forEach(([player_id, used_pieces]) => {\n    Object.entries(piece_set).forEach(([type, total]) => {\n      used_pieces[type] = used_pieces[type] || 0\n      const count = unlimited ? 1 : total - used_pieces[type]\n      if (count > 0) {\n        available.push({ type, player_id, count })\n      }\n    })\n  })\n  return available\n}\n\nexport default {\n  VANILLA,\n  getAvailable,\n  piece_counts,\n  tags,\n  list: Object.keys(piece_counts),\n  colors,\n}\n\ntags.all.forEach((type) => {\n  const toCheck = { captions, help, colors, boards }\n  Object.entries(toCheck).forEach(([name, map]) => {\n    if (!map[type]) {\n      console.log('missing', name, type) // eslint-disable-line\n    }\n  })\n})\n","import { render } from \"./Pieces.vue?vue&type=template&id=6624597a\"\nimport script from \"./Pieces.vue?vue&type=script&lang=js\"\nexport * from \"./Pieces.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import makeSprites from './makeSprites'\nimport Hexes from './Hexes'\nimport Nav from './Nav'\n// import PieceGenerator from './PieceGenerator'\nimport Pieces from './Pieces'\n\nexport default {\n  makeSprites,\n  views: { Hexes, Nav, Pieces },\n}\n","// adapted from https://www.digitalocean.com/community/tutorials/vuejs-vue-router-modify-head\n\nconst q = 'data-vue-router-controlled'\n\nexport default (to, from, next) => {\n  if (process.env.NODE_ENV === 'test') {\n    // mocked document is missing some features and this is not mission critical\n    next()\n    return\n  }\n\n  const nearestWithTitle = to.matched\n    .slice()\n    .reverse()\n    .find((r) => r.meta?.title)\n  if (nearestWithTitle) {\n    document.title = nearestWithTitle.meta.title\n  }\n\n  const nearestWithMeta = to.matched\n    .slice()\n    .reverse()\n    .find((r) => r.meta?.metaTags)\n\n  // Remove any stale meta tags from the document using the key attribute we set below.\n  Array.from(document.querySelectorAll(`[${q}]`)).forEach((el) => el.parentNode.removeChild(el))\n\n  // Turn the meta tag definitions into actual elements in the head.\n  nearestWithMeta?.meta.tags.forEach((tagDef) => {\n    const tag = document.createElement('meta')\n\n    Object.keys(tagDef).forEach((key) => tag.setAttribute(key, tagDef[key]))\n\n    // We use this to track which meta tags we create so we don't interfere with other ones.\n    tag.setAttribute(q, '')\n\n    document.head.appendChild(tag)\n  })\n\n  next()\n}\n","import css from '@unrest/css'\n\nconst content = `\n* Game rules and (most) design elements originated from the borad game Hive by Jhon Yianni. [Learn more at Board Game Geek](https://boardgamegeek.com/forums/thing/2655/hive).\n* Assets and extra rules taken from [A collection of variant pieces ](https://boardgamegeek.com/filepage/90063/collection-variant-pieces) and [Hive Swarm](https://boardgamegeek.com/filepage/95016/hive-swarm).\n* This article on [Hexagonal Grids](https://www.redblobgames.com/grids/hexagons/) by Red Blob Games was used frequently while writting this program.\n* This app was made by me using react and is hosted at github at [chriscauley/hive.js](https://github.com/chriscauley/hive.js/). Feel free to create an issue or message [@chriscauley](https://boardgamegeek.com/user/chriscauley) on Board Game Geek.\n* Icons made by [Freepik](https://www.flaticon.com/authors/freepik) and [Vitaly Gorbachev](https://www.flaticon.com/authors/vitaly-gorbachev) at www.flaticon.com\n`\n\nexport default {\n  __route: {\n    path: '/about/',\n    meta: {},\n  },\n  render: () => (\n    <section>\n      <div className={css.modal.outer('-relative')}>\n        <div className={css.modal.content('-auto')}>\n          <h2>About</h2>\n          <unrest-markdown source={content} className=\"markdown\" />\n        </div>\n      </div>\n    </section>\n  ),\n}\n","<template>\n  <div v-if=\"$auth.ready\" :class=\"css.modal.outer('-relative')\">\n    <div :class=\"css.modal.content('-auto')\">\n      <div class=\"text-center pb-2\">\n        <h2>Welcome!</h2>\n        <template v-if=\"$auth.user\">\n          <template v-if=\"$auth.enabled\">\n            <router-link to=\"/new/online/\" :class=\"css.button('block mb-4')\">\n              Start Online Game\n            </router-link>\n            <div class=\"font-bold font-xl mb-4\">-- OR --</div>\n          </template>\n          <router-link to=\"/new/local/\" :class=\"css.button('block')\">\n            Start Local Game\n          </router-link>\n        </template>\n        <template v-else>\n          <div @click=\"makeGuest\" :class=\"css.button('block mb-4')\">\n            Play as Guest\n          </div>\n          <router-link :to=\"signup\" :class=\"css.button('block mb-4')\">\n            Create An Account\n          </router-link>\n          <router-link :to=\"login\" :class=\"css.button('block')\">\n            Log In\n          </router-link>\n        </template>\n      </div>\n      <!-- TODO <RoomList /> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nexport default {\n  __route: {\n    path: '/',\n  },\n  data() {\n    const { query } = this.$route\n    const signup = { path: '/auth/sign-up/', query }\n    const login = { path: '/auth/login/', query }\n    return { css, signup, login }\n  },\n  methods: {\n    makeGuest() {\n      this.$auth.api\n        .post('auth/guest/')\n        .then(this.$auth.refetch)\n        .then(() => {\n          if (this.$route.query.next) {\n            this.$router.replace(this.$route.query.next)\n          }\n        })\n    },\n  },\n}\n</script>\n","import { render } from \"./Home.vue?vue&type=template&id=406c1bbd\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import css from '@unrest/css'\n\nconst content = {\n  'v1.0.2 Dec 28, 2020': [\n    'NEW PIECE: Praying Mantis can leap onto furthest piece in any direction and drag a stacked piece with it.',\n    'NEW PIECE: Kung Fu Mantis can grab a piece two spaces away and move it underneath.',\n    'NEW PIECE: Emerald Wasp can take two steps onto the hive (or step off if starting on the hive).',\n    'NEW PIECE: Lanternfly Nymph can move to any empty space surrounded on 3 or more sides.',\n    'Mosquito can now copy every move by every piece (does not copy passives).',\n    'Minor ui tweaks.',\n  ],\n  'v1.0.1 Nov 14, 2020': [\n    'NEW PIECE: Lanternfly can fly over the hive to any open space is touching pieces on 3 sides (otherwise moves like queen).',\n    'NEW PIECE: Orbweaver Spider moves like a spider and no piece can move over it (this ability has been taken from scorpion which now only blocks stacking pieces).',\n    'Changed all variations (spiderwebs, venom_centipede, damselfly, super grasshopper) into piece (trapdoor spider, earthworm, damselfly, cicada)',\n    'Added preview piece widget to New Game and \"waiting for host to select rules\" screens.',\n    'All pieces are now svgs.',\n  ],\n  'v.1.0.0b Oct 24, 2020': [\n    'Pick any combinaton of tiles in new game.',\n    'Select stack + hover to expand',\n  ],\n  'v1.0.0a Oct 17, 2020': [\n    'Dark mode! (config dropdown)',\n    'Changed fly completely (email me if you want me to add original in as a variant). Old fly was only useful in very rare circumstances.',\n    'Added \"lotus mantis\" variant because default mantis was very underpowered. Lotus Mantis is on par with beetle.',\n    'Added help text for damselfly, lotus mantis, and new fly.',\n    'Lots of improvements to game backend in preparation of replays.',\n  ],\n}\n\nconst getId = (s) => s.split(' ')[0].replace(/\\./g, '-')\n\nexport default {\n  __route: {\n    path: '/change-log/',\n    meta: {},\n  },\n  render: () => (\n    <div>\n      <div className={css.modal.outer()} style={{ position: 'relative', zIndex: 1 }}>\n        <div className={css.modal.content()}>\n          <h2>Change Log</h2>\n          {Object.entries(content).map(([title, items]) => (\n            <div\n              key={title}\n              id={getId(title)}\n              className=\"mb-4 pb-2 border-b border--text-alt last:border-b-0\"\n            >\n              <h3>{title}</h3>\n              <ul className=\"browser-default\">\n                {items.map((item) => (\n                  <li key={item}>{item}</li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  ),\n}\n","export default {\n  __route: {\n    path: '/new/:location/',\n    meta: { authRequired: true },\n  },\n  render: () => <div />,\n  mounted() {\n    if (this.$route.params.location !== 'online') {\n      this.$router.replace('/play/local/')\n    } else {\n      this.$store.room.save({}).then(({ id }) => this.$router.replace(`/play/${id}/`))\n    }\n  },\n}\n","<template>\n  <div class=\"online-room\" v-if=\"room\">\n    <div class=\"online-room__left\">\n      <game v-if=\"room.board\" :room=\"room\" />\n      <new-game v-else :room=\"room\" :setRules=\"setRules\" :startGame=\"startGame\" />\n    </div>\n    <ur-chat-widget v-if=\"room_id !== 'local'\" :room_id=\"room_id\" :key=\"room_id\" />\n  </div>\n</template>\n\n<script>\nimport NewGame from '@/components/NewGame'\nimport Game from '@/components/Game'\n\nexport default {\n  components: { Game, NewGame },\n  __route: {\n    path: '/play/:room_id/',\n    meta: { authRequired: true },\n    beforeEnter: (to, from, next) => {\n      const { room_id } = to.params\n      if (room_id !== 'local' && isNaN(Number(room_id))) {\n        next('/')\n      } else {\n        next()\n      }\n    },\n  },\n  computed: {\n    room_id() {\n      const { room_id } = this.$route.params\n      return room_id === 'local' ? room_id : Number(room_id)\n    },\n    room() {\n      return this.$store.room.watch(this.room_id)\n    },\n  },\n  methods: {\n    setRules(rules) {\n      this.$store.room.send(this.room_id, 'set_rules', rules)\n    },\n    startGame() {\n      this.$store.room.send(this.room_id, 'start_game')\n    },\n  },\n}\n</script>\n","<template>\n  <div class=\"new-game__wrapper\">\n    <div class=\"new-game\" v-if=\"rules\">\n      <div class=\"flex justify-between items-center\">\n        <h2>{{ is_host ? 'Choose pieces' : 'Host is choosing pieces' }}</h2>\n        <div>{{ total_pieces }} pieces selected</div>\n      </div>\n      <div class=\"flex\">\n        <div :class=\"`w-1/2 ${is_host ? '' : 'is_guest'}`\">\n          <rule-list :rules=\"rules\" :onClick=\"onClick\" :onHover=\"(t) => (hovering = t)\" />\n          <div v-if=\"is_host\">\n            <button v-if=\"can_start\" :class=\"css.button('mt-4 mr-4')\" @click=\"startGame\">\n              Start\n            </button>\n            <div v-else class=\"mt-2 flex items-center\">\n              <i class=\"fa fa-warning text-yellow-500 mr-2\" />\n              Waiting for players...\n              <div class=\"btn -primary ml-4\" @click=\"copyUrl\">\n                <i class=\"fa fa-copy mr-1\" />\n                {{ copied ? 'Copied!' : 'Copy url' }}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"w-1/2\">\n          <div v-if=\"hovering\" class=\"h-full\">\n            <div class=\"flex items-center text-3xl font-bold\">\n              <div style=\"width: 36px, height: 32px\" class=\"relative mr-2\">\n                <hive-piece :type=\"hovering\" :player=\"2\" />\n              </div>\n              {{ title(hovering) }}\n            </div>\n            <ul class=\"browser-default\">\n              <li v-for=\"text in hovering_lines\" :key=\"text\">{{ text }}</li>\n            </ul>\n          </div>\n          <p v-else>{{ empty_text }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nimport pieces from 'hive.js/pieces'\nimport short_help from 'hive.js/short_help'\nimport RuleList from './RuleList'\nimport HivePiece from './Piece'\nimport ls from 'local-storage-json'\n\n// TODO move clean rules into store\nconst cleanRules = (rules) => {\n  rules &&\n    Object.keys(rules.pieces).forEach((type) => {\n      if (!pieces.piece_counts[type]) {\n        delete rules.pieces[type]\n      }\n    })\n  return rules\n}\n\nconst host_text = `\nChoose which pieces to play with. Click adds a piece, shift+click removes it.\nHover over a piece to read more. It's recommended that you choose 10-12 pieces.\n`\n\nconst guest_text = `\nWaiting for host to choose pieces. Check out the rules while you wait.\nHover over a piece to read more. Use the chat to request the host change pieces.\n`\n\nconst MAX = 8\nconst LS_KEY = 'NEW_GAME_RULES'\n\nexport default {\n  components: { RuleList, HivePiece },\n  props: {\n    room: Object,\n    setRules: Function,\n    startGame: Function,\n  },\n  data() {\n    const href = window.location.href\n    return { hovering: null, css, copied: null, href }\n  },\n  computed: {\n    is_host() {\n      return this.room.id === 'local' || this.room.state.host_id === this.$store.auth.user?.id\n    },\n    rules() {\n      let { rules } = this.room.state\n      if (!rules && this.is_host) {\n        rules = cleanRules(ls.get(LS_KEY) || { variants: {}, pieces: { ...pieces.VANILLA } })\n        this.setRules(rules)\n      }\n      return cleanRules(rules)\n    },\n    total_pieces() {\n      return Object.values(this.rules.pieces).reduce((acc, num) => acc + num, 0)\n    },\n    empty_text() {\n      return this.is_host ? host_text : guest_text\n    },\n    hovering_lines() {\n      return short_help[this.hovering]\n    },\n    can_start() {\n      if (this.room.id === 'local') {\n        return true\n      }\n      const { player_id, afk } = this.room.state\n      return player_id && !afk.includes(player_id)\n    },\n  },\n  methods: {\n    title: (s) =>\n      s\n        .split('_')\n        .map((s) => s[0].toUpperCase() + s.slice(1))\n        .join(' '),\n    onClick(e, type) {\n      if (!this.is_host) {\n        return\n      }\n      const { rules } = this\n      rules.pieces[type] = rules.pieces[type] || 0\n      rules.pieces[type] += e.shiftKey ? -1 : 1\n      if (rules.pieces[type] < 0) {\n        rules.pieces[type] = MAX\n      } else if (rules.pieces[type] > MAX) {\n        rules.pieces[type] = 0\n      }\n      this.setRules(rules)\n    },\n    copyUrl() {\n      const input = document.createElement('input')\n      input.value = window.location.href\n      document.body.appendChild(input)\n      input.select()\n      document.execCommand('copy')\n      document.body.removeChild(input)\n      this.copied = true\n      setTimeout(() => (this.copied = false), 5000)\n    },\n  },\n}\n</script>\n","const _along = 'Move one square along the hive.'\nconst _stack = 'Cannot step on scorpion.'\nconst _fly = 'Cannot move over orbweaver.'\nconst _crawl = 'Will stop moving if it touches the trapdoor spider.'\nconst _spiderlike = (e) => ['Move three steps along hive.', 'Jump over one tile.', ...e]\nconst _beetle = 'Moves like a beetle if it starts a turn on the hive.'\n\nconst queen = [_along, 'If surrounded, you lose.', 'You can only have one queen.']\nconst beetle = [_along, 'Can move onto hive.', _stack]\nconst grasshopper = ['Hops over hive.', _fly]\nconst cicada = ['Can make unlimited jumps over the hive.', _fly, _crawl]\nconst spider = _spiderlike([])\nconst ant = ['Can move unlimited spaces along the hive.', _crawl]\nconst ladybug = ['Takes two steps on hive then one step off.', _fly]\nconst mosquito = [\n  'Copies the movement and restrictions of any piece it is touching.',\n  _beetle,\n  'Cannot copy special abilities.',\n]\nconst pill_bug = [_along, 'Can move any piece it is touching to another empty square.']\nconst orchid_mantis = [_along, 'Can pull a piece under itself.', _beetle, _stack]\nconst kung_fu_mantis = [\n  'Can pull a piece two spaces in any direction under itself.',\n  _beetle,\n  _stack,\n]\n\nconst praying_mantis = [\n  'Can jump over the hive and land on the furthest piece in any direction',\n  'Will carry a stacked piece with it when it jumps.',\n  'If on the hive, can only step on the ground.',\n  _fly,\n  _stack,\n]\nconst fly = [\n  'If on ground, can step on the hive.',\n  'If on the hive, can fly to any open square.',\n  _fly,\n  _stack,\n]\nconst lanternfly = [_along, 'If touching pieces on 3 sides, can fly anywhere.', _fly]\nconst lanternfly_nymph = [_along, 'Can fly to any space surrounded on 3 or more sides.']\nconst wasp = ['Can fly over hive and land in any space not touching a friendly piece.', _fly]\nconst cockroach = ['Can move over friendly pieces to any empty space.', _fly]\nconst dragonfly = [\n  'Can move one space forward than one space left or right.',\n  'If it moves from a stack to an empty space, it will carry one piece with it.',\n]\nconst damselfly = ['If on the ground, can move along the hive.', ...dragonfly]\nconst dragonfly_nymph = [\n  'If on the ground can pull any piece under it from one diagonal away (one space forward and one to the right or left).',\n  'If on the hive it moves one diagonal in any direction.',\n  'If it moves to an empty space it will carry the piece under along with it.',\n]\nconst centipede = [_along, 'Can swap with an adjacent piece.']\nconst earthworm = [_along, 'Can swap with the bottom piece of any stack 3  (on hive) moves away.']\nconst orbweaver = _spiderlike([\n  'No piece can move over.',\n  'Defends against grasshopper, cicada, ladybug, fly, wasp, and cockroach.',\n])\nconst trapdoor_spider = _spiderlike([\n  'Traps any piece that moves next to it.',\n  'Defends against ant and cicada.',\n])\nconst scorpion = _spiderlike([\n  'No piece can stack on top of the scorpion.',\n  'Defends against beetle, fly, dragonfly, and orchid mantis, kung fu mantis, and praying mantis.',\n])\n\nconst emerald_wasp = [\n  'If on the ground, can take two steps onto the hive.',\n  'If on the hive, can only step on the ground.',\n  _fly,\n  _stack,\n]\n\nexport default {\n  queen,\n  beetle,\n  grasshopper,\n  cicada,\n  spider,\n  ant,\n  ladybug,\n  mosquito,\n  pill_bug,\n  orchid_mantis,\n  kung_fu_mantis,\n  praying_mantis,\n  fly,\n  lanternfly,\n  lanternfly_nymph,\n  wasp,\n  cockroach,\n  dragonfly,\n  dragonfly_nymph,\n  damselfly,\n  centipede,\n  earthworm,\n  orbweaver,\n  trapdoor_spider,\n  scorpion,\n  emerald_wasp,\n}\n","<template>\n  <div class=\"RuleList mt-4\">\n    <span v-for=\"(piece_list, irow) in piece_lists\" :key=\"irow\" class=\"hex-grid TutorialNav\">\n      <div class=\"row\">\n        <hive-piece\n          v-for=\"type in piece_list\"\n          :key=\"type\"\n          :title=\"type\"\n          :player=\"irow\"\n          :type=\"type\"\n          :count=\"getCount(type)\"\n          @click=\"(e) => onClick?.(e, type)\"\n          @mouseover=\"onHover?.(type)\"\n          @mouseout=\"onHover?.(null)\"\n        />\n      </div>\n    </span>\n  </div>\n</template>\n\n<script>\nimport HivePiece from './Piece'\n\nimport pieces from 'hive.js/pieces'\nimport sprite from '@/sprite'\n\nexport default {\n  components: { HivePiece },\n  props: {\n    rules: Object,\n    onClick: Function,\n    onHover: Function,\n  },\n  data() {\n    const _len = 5\n    let row = []\n    const piece_lists = [row]\n    pieces.list.forEach((type) => {\n      if (row.length === _len) {\n        piece_lists.push((row = []))\n      }\n      row.push(type)\n    })\n    return { piece_lists }\n  },\n  mounted() {\n    sprite.makeSprites()\n  },\n  methods: {\n    getCount(type) {\n      if (type === 'queen') {\n        return 'lock'\n      }\n      return this.rules.pieces[type] || 0\n    },\n  },\n}\n</script>\n","<template>\n  <div class=\"item\">\n    <div className=\"content\" :data-count=\"count\">\n      <div :class=\"css\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    count: [Number, String],\n    player: Number,\n    type: String,\n  },\n  computed: {\n    css() {\n      const { player, type } = this\n      return `hex hex-player_${(player % 2) + 1} type type-${type} piece`\n    },\n  },\n}\n</script>\n","import { render } from \"./Piece.vue?vue&type=template&id=99a44f56\"\nimport script from \"./Piece.vue?vue&type=script&lang=js\"\nexport * from \"./Piece.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./RuleList.vue?vue&type=template&id=46161ca8\"\nimport script from \"./RuleList.vue?vue&type=script&lang=js\"\nexport * from \"./RuleList.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./NewGame.vue?vue&type=template&id=2e6db27a\"\nimport script from \"./NewGame.vue?vue&type=script&lang=js\"\nexport * from \"./NewGame.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"game\">\n    <hive-board :rows=\"rows.player_1\" :class=\"css.player(1, rows.player_1)\" @clickPiece=\"click\" />\n    <hive-board :rows=\"rows.player_2\" :class=\"css.player(2, rows.player_2)\" @clickPiece=\"click\" />\n    <div class=\"scroll-box\" ref=\"scroll_box\">\n      <div class=\"inner\">\n        <hive-board :rows=\"rows.rows\" class=\"game_board\" @clickPiece=\"click\" />\n      </div>\n    </div>\n    <help-text v-bind=\"board.selected\" :board=\"board\" />\n    <div :class=\"css.player_indicator\">\n      <winner v-if=\"board.winner\" :board=\"board\" :room=\"room\" />\n      <no-rules v-if=\"board.rules.no_rules\" :deleteSelected=\"board.selected && deleteSelected\" />\n      <div v-if=\"board.error\" :class=\"css.alert.danger()\">\n        <i :class=\"css.icon('times-circle text-xl mr-2')\" />\n        {{ board.error }}\n      </div>\n      <div v-else :class=\"css.alert.info()\">\n        <div>\n          {{ turn_text }}\n          <time-since :time=\"board.last_move_at\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\nimport Mousetrap from '@unrest/vue-mousetrap'\n\nimport B from 'hive.js/Board'\nimport toRows from 'hive.js/Board/toRows'\nimport sprite from '@/sprite'\nimport HiveBoard from './Board'\nimport HelpText from './HelpText'\nimport NoRules from './NoRules'\nimport TimeSince from './TimeSince'\nimport Winner from './Winner'\n\nMousetrap.register({\n  cancel: 'esc',\n  undo: 'mod+z',\n  redo: 'mod+y,mod+shift+z',\n  help: '?,/',\n})\n\nexport default {\n  components: { HelpText, HiveBoard, NoRules, TimeSince, Winner },\n  mixins: [Mousetrap.Mixin],\n  props: {\n    room: Object,\n  },\n  computed: {\n    is_local() {\n      return this.room.id === 'local'\n    },\n    mousetrap() {\n      return {\n        cancel: () => B.unselect(this.board),\n        undo: () => this.$store.room.undo(this.room.id),\n        redo: () => this.$store.room.redo(this.room.id),\n        'i l o v e b e e s': () => {\n          B.doAction(this.board, ['toggleCheat'])\n          this.$store.room.sync(this.room.id)\n        },\n      }\n    },\n    board() {\n      return this.room.board\n    },\n    turn_text() {\n      if (!this.board.local_player) {\n        // local game or spectating person\n        return `Player ${this.board.current_player}'s turn`\n      }\n      return B.isUsersTurn(this.board) ? 'Your turn' : \"Opponent's turn\"\n    },\n    css() {\n      const { alert, icon } = css\n      const { current_player } = this.board\n\n      const player = (number, piece_rows) => {\n        const highlight = number === current_player\n        const color = B.isUsersTurn(this.board) ? 'green' : 'red'\n        const height = piece_rows[piece_rows.length - 1].length === 1 ? '' : 'long'\n        return `player_${number} odd-q ${highlight ? 'highlight-' + color : ''} ${height}`\n      }\n      const orientation = current_player === 1 ? 'left' : 'right'\n      const player_indicator = `absolute top-0 ${orientation}-0 flex`\n      return { alert, icon, player, player_indicator }\n    },\n    rows() {\n      return toRows(this.board, { columns: 2 })\n    },\n  },\n  mounted() {\n    sprite.makeSprites()\n    const { scroll_box } = this.$refs\n    const { scrollWidth, scrollHeight, clientWidth, clientHeight } = scroll_box\n    scroll_box.scroll((scrollWidth - clientWidth) / 2, (scrollHeight - clientHeight) / 2)\n  },\n  methods: {\n    click(cell) {\n      B.click(this.board, cell)\n      this.$store.room.sync(this.room.id)\n    },\n    deleteSelected() {\n      if (!this.is_local) {\n        this.$ui.toast('TODO: Delete not implemented for network games.')\n      } else {\n        const { piece_id } = this.board.selected\n        B.deletePiece(this.board, piece_id)\n      }\n    },\n  },\n}\n</script>\n","import { range } from 'lodash'\n\nexport const mod = (a, b) => ((a % b) + b) % b\n\nconst geo_cache = {}\n\nexport const getGeo = (board) => {\n  const WH = `${board.W},${board.H}`\n  if (!geo_cache[WH]) {\n    geo_cache[WH] = new Geo(board, WH)\n  }\n  return geo_cache[WH]\n}\n\nexport default class Geo {\n  constructor(options) {\n    /* istanbul ignore next */\n    if (!options.W || !options.H) {\n      throw 'Geo requires a width and height (constructor options W and H)'\n    }\n    this.setSize(options)\n    // html element for mouse event calculations\n    // can be undefined during initialization and set later\n    this.element = options.element\n  }\n\n  setSize({ W, H }) {\n    this.W = W\n    this.H = H\n    this.WH = `${W},${H}`\n    this.AREA = W * H\n    this.preCache()\n    this.center = this.xy2index([Math.floor(this.W / 2), Math.floor(this.H / 2)])\n    this.center -= 1 // bias to lower size\n  }\n\n  xy2index = (xy) => xy[0] + this.W * xy[1]\n  index2xy = (index) => [index % this.W, Math.floor(index / this.W)]\n\n  preCache = () => {\n    // const { W, H, xy2index } = this\n    this.indexes = range(this.AREA)\n\n    // added to an index these give the up-left, up, ..., down-left cells\n    this.dindexes = {\n      0: [-1, -this.W, 1, this.W + 1, this.W, this.W - 1], // index is even\n      1: [-this.W - 1, -this.W, -this.W + 1, 1, this.W, -1], // index is odd\n      dragonfly: {\n        0: [-this.W - 1, -this.W + 1, 2, -2, 2 * this.W + 1, 2 * this.W - 1],\n      },\n      short: {\n        0: {},\n        1: {},\n      },\n    }\n    this.short_dirs = ['ul', 'u', 'ur', 'dr', 'd', 'dl']\n    this.short_dirs.forEach((s, si) => {\n      this.dindexes.short[0][s] = this.dindexes[0][s] = this.dindexes[0][si]\n      this.dindexes.short[1][s] = this.dindexes[1][s] = this.dindexes[1][si]\n    })\n    this.dindexes.dragonfly[1] = this.dindexes.dragonfly[0].map((di) => di * -1)\n    this.touching = {}\n    this.short_dindexes = {}\n    this.indexes.forEach((index) => {\n      this.touching[index] = this.dindexes[mod(index, 2)].map((di) => index + di)\n    })\n  }\n\n  // shift = (index, dir) => index + this.dindexes.short[mod(index, 2)][dir]\n\n  // These are geometry functions I planned on using but didn't. Leaving them here just in case\n  // getDindex = (index, short_dir) => this.dindexes.short[mod(index, 2)][short_dir]\n  // pxy2index = (pxy) => this.xy2index(this.pxy2xy(pxy))\n  // needs to be converted from cartesian to hex\n  // pxy2xy = (pxy) => {\n  //   if (!this.element) {\n  //     return [-1, -1]\n  //   }\n  //   const { left, top, height } = this.element.getBoundingClientRect()\n  //   const w_px = height / this.W\n  //   const h_px = height / this.H\n  //   return [\n  //     Math.floor((pxy[0] - left) / h_px),\n  //     Math.floor((pxy[1] - top) / w_px),\n  //   ]\n  // }\n}\n","export default (board, indexes, max_stack = 1) => {\n  if (typeof indexes === 'number') {\n    indexes = [indexes]\n  }\n\n  // if a stack is 2+ pieces high, moving top piece will not break hive\n  // for dragonfly's move, max_stack = 2 because the lower piece isn't moved if it breaks hive\n  indexes = indexes.filter((i) => board.stacks[i] && board.stacks[i].length <= max_stack)\n\n  let hive_count = 0\n  const hive_map = {}\n  Object.keys(board.stacks).forEach((index) => {\n    index = parseInt(index)\n    if (indexes.includes(index)) {\n      return\n    }\n    let hive_no\n    board.geo.touching[index].forEach((touched_index) => {\n      if (indexes.includes(touched_index)) {\n        return\n      }\n      const touched_no = hive_map[touched_index]\n      if (touched_no && touched_no !== hive_no) {\n        if (hive_no) {\n          // set everything in hive equal to this hive_no\n          Object.entries(hive_map).forEach(([index, _no]) => {\n            if (_no === touched_no) {\n              hive_map[index] = hive_no\n            }\n          })\n        } else {\n          hive_no = touched_no\n        }\n      }\n    })\n    if (!hive_no) {\n      hive_count++\n      hive_no = hive_count\n    }\n    hive_map[index] = hive_no\n  })\n  return new Set(Object.values(hive_map)).size > 1\n}\n","// Webs are passives can block the movement of other pieces\n\n// which pieces can be affected by which webs\nconst web_targets = {\n  fly: ['fly', 'wasp', 'ladybug', 'cockroach', 'grasshopper', 'cicada', 'lanterfly'],\n  crawl: ['ant', 'cicada'], // , 'orbweaver', 'scorpion', 'trapdoor_spider', 'spider'],\n  stack: ['beetle', 'orchid_mantis', 'praying_mantis', 'fly', 'dragonfly'],\n}\n\nconst piece_shows_webs = {}\n\nObject.entries(web_targets).forEach(([web, pieces]) => {\n  pieces.forEach((piece) => {\n    piece_shows_webs[piece] = piece_shows_webs[piece] || []\n    piece_shows_webs[piece].push(web)\n  })\n})\n\nexport default {\n  scorpion: (b, i) => {\n    // no piece can step on top of a scorpion\n    b.layers.stack[i] = true\n  },\n  orbweaver: (b, i) => {\n    // no piece can fly over an orbweaver\n    b.layers.fly[i] = true\n  },\n  trapdoor_spider: (b, i) => {\n    // crawling pieces can get trapped in webs, but cannot get re-trapped in a web they start in\n    b.geo.touching[i].forEach((i2) => {\n      b.layers.crawl[i2] = b.layers.crawl[i2] || []\n      b.layers.crawl[i2].push(parseInt(i))\n    })\n  },\n\n  // filters\n  no: {\n    fly: (b, i) => !b.layers.fly[i],\n    crawl: (b, i) => !b.layers.crawl[i],\n    stack: (b, i) => !b.layers.stack[i],\n  },\n\n  getVisible(b, i) {\n    const type = b.layers.type[i]\n    if (type === 'fly') {\n      // fly show different webs if starting on ground or stack\n      return [b.stacks[i].length === 1 ? 'stack' : 'fly']\n    }\n    // everyone else obeys piece_shows_webs\n    return piece_shows_webs[type] || []\n  },\n\n  title: {\n    crawl: (type) => `The ${type} get stuck in the trapdoor_spiders web.`,\n    'crawl-gray': (type) =>\n      `Since the ${type} started in this web, it cannot be stuck on it again.`,\n    stack: (type) => `The ${type} cannot step on top of the scorpion.`,\n    fly: (type) => `The ${type} cannot move over the orbweaver.`,\n  },\n}\n","import { mod } from './Geo'\nimport { flatten, last } from 'lodash'\n\nimport webs from './webs'\n\nexport const notEnemyScorpion = (board, source, target) => {\n  const { stack, player } = board.layers\n  return !stack[target] || player[source] === player[target]\n}\n\nconst getPlacement = (board, player_id, excludes = []) => {\n  if (board.turn === 0) {\n    return [board.geo.center]\n  }\n  if (board.turn === 1) {\n    return [board.geo.center + 1]\n  }\n\n  player_id = parseInt(player_id)\n  const other_player = player_id === 1 ? 2 : 1\n\n  // is index touching a player?\n  const player_touching = {\n    1: {},\n    2: {},\n  }\n  Object.entries(board.stacks).forEach(([index, stack]) => {\n    const piece_id = last(stack)\n    index = parseInt(index)\n    if (excludes.includes(index)) {\n      return\n    }\n    const player = board.piece_owners[piece_id]\n    board.geo.touching[index].forEach((index2) => {\n      if (!board.stacks[index2]) {\n        player_touching[player][index2] = true\n      }\n    })\n  })\n\n  return Object.keys(player_touching[player_id])\n    .filter((index) => !player_touching[other_player][index])\n    .map((index) => parseInt(index))\n}\n\nconst stepAlongHive = (board, index, excludes = []) => {\n  const touching = board.geo.touching[index]\n  return touching.filter((target_index, i) => {\n    if (board.stacks[target_index] || excludes.includes(target_index)) {\n      return false\n    }\n    let count = 0\n    const left_index = touching[mod(i - 1, touching.length)]\n    const right_index = touching[mod(i + 1, touching.length)]\n    !excludes.includes(left_index) && board.stacks[left_index] && count++\n    !excludes.includes(right_index) && board.stacks[right_index] && count++\n    return count === 1\n  })\n}\n\nexport const stepOnHive = (board, index, excludes = []) => {\n  const touching = board.geo.touching[index]\n  return touching.filter((target_index) => {\n    return (\n      board.stacks[target_index] &&\n      !excludes.includes(target_index) &&\n      notEnemyScorpion(board, index, target_index)\n    )\n  })\n}\n\nconst stepOffHive = (board, index, excludes = []) => {\n  const touching = board.geo.touching[index]\n  return touching.filter((target_index) => {\n    return !board.stacks[target_index] && !excludes.includes(target_index)\n  })\n}\n\nconst makePaths = (board, index) => {\n  const subhive = { stacks: {}, geo: board.geo }\n  Object.keys(board.stacks)\n    .filter((i) => parseInt(i) !== index)\n    .forEach((i) => (subhive.stacks[i] = board.stacks[i]))\n  const paths = {}\n  const targets = [index]\n  while (targets.length) {\n    const target = targets.pop()\n    paths[target] = stepAlongHive(subhive, target)\n    paths[target].filter((i) => !paths[i]).forEach((i) => targets.push(i))\n  }\n  return paths\n}\n\nconst walkPaths = (paths, index, n_steps, excludes = []) => {\n  const next = paths[index].filter((i) => !excludes.includes(i))\n  if (n_steps === 1) {\n    return next\n  }\n  return flatten(next.map((i) => walkPaths(paths, i, n_steps - 1, [...excludes, index])))\n}\n\nconst nStepsAlongHive = (board, index, n_steps) => {\n  const paths = makePaths(board, index)\n  return walkPaths(paths, index, n_steps)\n}\n\nconst isTouchingEnemySpider = (board, start_index, target_index) => {\n  const webs = board.layers.crawl[target_index]\n  if (!webs) {\n    return false\n  }\n  const starting_webs = board.layers.crawl[start_index] || []\n  const owner = board.layers.player[start_index]\n  return (\n    undefined !==\n    webs.find(\n      (i) => board.layers.player[i] !== owner && !starting_webs.includes(i), // friendly spiders do not stop // cannot get stopped by web you start in\n    )\n  )\n}\n\nconst ant = (board, index) => {\n  // left and right spaces from ant\n  const paths = makePaths(board, index)\n  const checked = {}\n  const locked = {}\n  const targets = [index]\n  const moves = []\n  while (targets.length) {\n    const target = targets.shift()\n    if (checked[target]) {\n      continue\n    }\n    checked[target] = true\n    paths[target]\n      .filter((t2) => !checked[t2])\n      .forEach((t2) => {\n        if (locked[target]) {\n          locked[t2] = true\n        } else {\n          if (isTouchingEnemySpider(board, index, t2)) {\n            locked[t2] = true\n          }\n          moves.push(t2)\n        }\n        targets.push(t2)\n      })\n  }\n  return moves\n}\n\nconst grasshopper = (board, index, excludes = []) => {\n  const moves = []\n  board.geo.touching[index].map((target_index, i_dir) => {\n    if (!board.stacks[target_index]) {\n      // grasshopper must first step on hive\n      return\n    }\n\n    // grasshopper travels in same direction until it falls off hive\n    while (board.stacks[target_index]) {\n      if (board.layers.fly[target_index]) {\n        // orbweaver stops grasshopper\n        return\n      }\n      if (excludes.includes(target_index)) {\n        return\n      }\n      const dindex = board.geo.dindexes[mod(target_index, 2)][i_dir]\n      target_index += dindex\n    }\n    moves.push(target_index)\n  })\n  return moves\n}\n\nconst cicada = (board, index) => {\n  const targets = [index]\n  const moves = []\n  while (targets.length) {\n    const target = targets.pop()\n    grasshopper(board, target, [index])\n      .filter((index2) => !moves.includes(index2))\n      .forEach((index2) => {\n        moves.push(index2)\n        if (!isTouchingEnemySpider(board, index, index2)) {\n          targets.push(index2)\n        }\n      })\n  }\n  return moves\n}\n\nconst ladybug = (board, index) => {\n  const noFly = (i) => !board.layers.fly[i]\n  let moves = []\n  stepOnHive(board, index)\n    .filter(noFly)\n    .forEach((on_index1) =>\n      stepOnHive(board, on_index1, [index])\n        .filter(noFly)\n        .forEach((on_index2) => (moves = moves.concat(stepOffHive(board, on_index2, [index])))),\n    )\n  return moves\n}\n\nconst emerald_wasp = (board, index) => {\n  if (board.stacks[index].length > 1) {\n    return stepOffHive(board, index)\n  }\n  const noFly = (i) => !board.layers.fly[i]\n  let moves = []\n  stepOnHive(board, index)\n    .filter(noFly)\n    .forEach((index2) => (moves = moves.concat(stepOnHive(board, index2, [index]))))\n  return moves.filter((index2) => notEnemyScorpion(board, index, index2))\n}\n\nconst orchid_mantis = (board, index) => {\n  if (board.stacks[index].length === 1) {\n    return stepAlongHive(board, index)\n  }\n  return beetle(board, index)\n}\n\nconst praying_mantis = (board, index) => {\n  return board.stacks[index].length > 1 ? stepOffHive(board, index) : []\n}\n\nconst mosquito = (b, i) => (b.stacks[i].length > 1 ? beetle(b, i) : [])\n\nconst beetle = (b, i) => {\n  if (b.stacks[i].length > 1) {\n    return stepOffHive(b, i).concat(stepOnHive(b, i))\n  }\n  return stepAlongHive(b, i).concat(stepOnHive(b, i))\n}\n\nconst getSubhive = (b, index, filters) => {\n  // create a map of places that can be stepped on the hive given a filter\n  const subhive = []\n  if (b.stacks[index].length > 1) {\n    // subhive includes index is there is a piece under the one that will move\n    subhive.push(index)\n  }\n  const targets = [index]\n  const checked = {}\n  while (targets.length) {\n    const target = targets.pop()\n    checked[target] = true\n    b.geo.touching[target].forEach((target2) => {\n      if (checked[target2] || !b.stacks[target2]) {\n        return\n      }\n      if (!filters.find((f) => !f(b, target2))) {\n        targets.push(target2)\n        subhive.push(target2)\n      }\n    })\n  }\n  return subhive\n}\n\nconst isPlayer = (player_id) => (b, index) => {\n  const piece_id = last(b.stacks[index])\n  return b.piece_owners[piece_id] === player_id\n}\n\nconst stepOffSubhive = (b, subhive, filter = () => true) => {\n  const out = []\n  subhive.forEach((target) => {\n    stepOffHive(b, target).forEach((final_index) => {\n      if (filter(b, final_index) && !out.includes(final_index)) {\n        out.push(final_index)\n      }\n    })\n  })\n  return out\n}\n\nconst cockroach = (b, index) => {\n  const current_player = b.piece_owners[last(b.stacks[index])]\n  const friendly_hive = getSubhive(b, index, [webs.no.fly, isPlayer(current_player)])\n  return stepOffSubhive(b, friendly_hive).filter((i2) => i2 !== index)\n}\n\nconst flyAnywhere = (b, i) => {\n  const subhive = getSubhive(b, i, [webs.no.fly])\n  return stepOffSubhive(b, subhive).filter((i2) => i2 !== i)\n}\n\nconst fly = (b, index) => {\n  if (b.stacks[index].length > 1) {\n    return flyAnywhere(b, index)\n  }\n  return stepOnHive(b, index)\n}\n\nconst lanternfly = (b, index) => {\n  const touching_stacks = b.geo.touching[index].filter((i) => b.stacks[i])\n  return touching_stacks.length < 3 ? stepAlongHive(b, index) : flyAnywhere(b, index)\n}\n\nconst lanternfly_nymph = (b, index) => {\n  const totals = {}\n  const occupied = Object.keys(b.stacks).filter((i) => parseInt(i) !== index)\n  occupied.forEach((stack_index) => {\n    b.geo.touching[stack_index]\n      .filter((i) => !b.stacks[i])\n      .forEach((index2) => {\n        totals[index2] = (totals[index2] || 0) + 1\n      })\n  })\n  const targets = flyAnywhere(b, index).filter((i) => totals[i] >= 3)\n  return stepAlongHive(b, index).concat(targets)\n}\n\nconst wasp = (b, index) => {\n  const current_player = b.piece_owners[last(b.stacks[index])]\n  const subhive = getSubhive(b, index, [webs.no.fly])\n  const placements = getPlacement(b, current_player === 1 ? 2 : 1, [index])\n  return stepOffSubhive(b, subhive).filter((i) => placements.includes(i))\n}\n\nconst damselfly = (board, index) => {\n  if (board.stacks[index].length === 1) {\n    return stepAlongHive(board, index)\n  }\n  return []\n}\n\nconst centipede = (board, index) => {\n  return stepAlongHive(board, index)\n}\n\nconst spider = (b, i) => {\n  const moves = nStepsAlongHive(b, i, 3)\n  b.geo.dindexes[mod(i, 2)].forEach((dindex, i_dir) => {\n    const index2 = i + dindex\n    if (!b.stacks[index2] || b.layers.type[index2] === 'orbweaver') {\n      // cannot \"jump\" an empty space or an orbweaver\n      return\n    }\n    const index3 = index2 + b.geo.dindexes[mod(index2, 2)][i_dir]\n    if (!b.stacks[index3]) {\n      // Can jump to next space if empty\n      moves.push(index3)\n    }\n  })\n  return moves\n}\n\nconst kung_fu_mantis = (b, i) => (b.stacks[i].length > 1 ? beetle(b, i) : [])\n\nconst moves = {\n  stepOnHive,\n  stepOffHive,\n  centipede,\n  queen: stepAlongHive,\n  pill_bug: stepAlongHive,\n  earthworm: stepAlongHive,\n  ant,\n  beetle,\n  cockroach,\n  dragonfly: () => [],\n  damselfly,\n  grasshopper,\n  cicada,\n  fly,\n  lanternfly,\n  lanternfly_nymph,\n  wasp,\n  getPlacement,\n  ladybug,\n  orchid_mantis,\n  praying_mantis,\n  mosquito,\n\n  // all spider-likes move the same\n  spider,\n  scorpion: spider,\n  trapdoor_spider: spider,\n  orbweaver: spider,\n  emerald_wasp,\n  kung_fu_mantis,\n}\n\nexport default moves\n","// Specials are moves that involve more than one piece\n// since specials take multiple arguments, specials need multiple steps to fill board.special_args\n// if board.special_args is long enough, return a function to execute as the move\n// other wise return potential indexes for the next argument\nimport { mod } from './Geo'\nimport wouldBreakHive from './wouldBreakHive'\nimport moves_lib, { stepOnHive, notEnemyScorpion } from './moves'\nimport { last } from 'lodash'\n\nconst markChalk = (b, targets, string) => {\n  if (b.selected) {\n    b.selected.chalk = Object.fromEntries(targets.map((i) => [i, string]))\n  }\n}\n\n// TODO might be mergeable with B.move. Maybe switch to moves.move to simplify imports?\nconst move = (b, i1, i2, special) => {\n  b.stacks[i2] = b.stacks[i2] || []\n  b.stacks[i2].push(b.stacks[i1].pop())\n  return { from: i1, to: i2, special }\n}\n\nconst selectNearby = (b, i) => {\n  return b.geo.touching[i].filter((i2) => b.stacks[i2] && !wouldBreakHive(b, i2))\n}\n\nconst pill_bug = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (args.length === 0) {\n    return selectNearby(b, index)\n  } else if (args.length === 1) {\n    return b.geo.touching[index].filter((i) => !b.stacks[i])\n  } else {\n    return () => move(b, args[0], args[1], index)\n  }\n}\n\nconst pullUnder = (b, index, target) => {\n  b.stacks[index].unshift(b.stacks[target].pop())\n  return {\n    from: target,\n    to: index,\n    stacks: [index, target],\n  }\n}\n\nconst orchid_mantis = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (b.stacks[index].length > 1) {\n    // already on top of hive\n    return []\n  }\n  if (args.length === 1) {\n    return () => pullUnder(b, index, args[0])\n  }\n  // select piece to pull under, no scorpions\n  const targets = selectNearby(b, index).filter((target) => notEnemyScorpion(b, index, target))\n  markChalk(b, targets, (s) => (s += ' purple-inner'))\n  return targets\n}\n\nconst kung_fu_mantis = (board, piece_id, args) => {\n  const index = board.reverse[piece_id]\n  if (board.stacks[index].length > 1) {\n    // already on top of hive\n    return []\n  }\n  if (args.length === 1) {\n    return () => pullUnder(board, index, args[0])\n  }\n  const { dindexes } = board.geo\n\n  const targets = dindexes[0].map((di, i) => index + di + dindexes[1][i])\n\n  // select piece to pull under, no scorpions\n  return targets\n    .filter((i) => board.stacks[i])\n    .filter((i) => !wouldBreakHive(board, [i, index]))\n    .filter((i) => notEnemyScorpion(board, index, i))\n}\n\nconst praying_mantis = (board, piece_id, args) => {\n  const index = board.reverse[piece_id]\n  if (board.stacks[index].length > 1 || wouldBreakHive(board, [index])) {\n    return []\n  }\n  const targets = []\n  board.geo.touching[index].map((target_index, i_dir) => {\n    let snag, last\n    if (!board.stacks[target_index]) {\n      return\n    }\n\n    // praying_mantis travels in same direction until it falls off hive\n    while (board.stacks[target_index]) {\n      if (last !== undefined && board.layers.fly[last]) {\n        // cannot leap over orbweaver\n        return\n      }\n      const dindex = board.geo.dindexes[mod(target_index, 2)][i_dir]\n      last = target_index\n      if (!snag && board.stacks[target_index].length > 1) {\n        snag = target_index\n      }\n      target_index += dindex\n    }\n    targets.push([last, snag])\n  })\n  if (args.length === 0) {\n    let snag_targets = []\n    targets.filter((t) => t[1] !== undefined).map((t) => (snag_targets = snag_targets.concat(t)))\n    markChalk(board, snag_targets, (s) => (s += ' purple-inner'))\n    return targets.filter((t) => !board.layers.stack[t[0]]).map((t) => t[0])\n  }\n  return () => {\n    const [target_index, snag_index] = targets.find((t) => t[0] === args[0])\n    const stacks = [target_index, index]\n    if (board.stacks[snag_index]) {\n      stacks.push(snag_index)\n      board.stacks[target_index].push(board.stacks[snag_index].pop())\n      args.push(snag_index)\n    }\n    board.stacks[target_index].push(board.stacks[index].pop())\n    return {\n      from: index,\n      to: target_index,\n      stacks,\n    }\n  }\n}\n\nconst swap = (b, index1, index2) => {\n  const piece1 = b.stacks[index1].pop()\n  const piece2 = b.stacks[index2].pop()\n  b.stacks[index1].push(piece2)\n  b.stacks[index2].push(piece1)\n}\n\nconst swapBottom = (b, index1, index2) => {\n  const piece1 = b.stacks[index1].shift()\n  const piece2 = b.stacks[index2].shift()\n  b.stacks[index1].unshift(piece2)\n  b.stacks[index2].unshift(piece1)\n}\n\nconst earthworm = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (args.length === 0) {\n    let moves = []\n    stepOnHive(b, index).forEach((on_index1) =>\n      stepOnHive(b, on_index1, [index]).forEach(\n        (on_index2) => (moves = moves.concat(stepOnHive(b, on_index2, [index, on_index1]))),\n      ),\n    )\n    return moves.filter((swap_index) => !wouldBreakHive(b, [index, swap_index]))\n  }\n  return () => {\n    swapBottom(b, index, args[0])\n    return {\n      from: index,\n      to: args[0],\n      stacks: [args[0]],\n    }\n  }\n}\n\nconst centipede = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (args.length === 0) {\n    const touching = b.geo.touching[index]\n    return touching.filter((index2, i_touching) => {\n      if (!b.stacks[index2] || b.stacks[index2].length > 1) {\n        return false\n      }\n      const left = b.stacks[touching[mod(i_touching - 1, 6)]]\n      const right = b.stacks[touching[mod(i_touching + 1, 6)]]\n      if (left && right) {\n        return false\n      }\n      return !wouldBreakHive(b, [index, index2])\n    })\n  }\n  return () => {\n    swap(b, index, args[0])\n    return {\n      from: index,\n      to: args[0],\n    }\n  }\n}\n\nconst dragonfly_nymph = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (b.stacks[index].length > 1) {\n    // once on the hive it acts like dragonfly\n    return dragonfly(b, piece_id, args)\n  }\n  if (args.length > 0) {\n    // 1 for move, 2 for redo\n    return () => {\n      args.push('pulled')\n      return pullUnder(b, index, args[0])\n    }\n  }\n  return b.geo.dindexes.dragonfly[mod(index, 2)]\n    .map((di) => index + di)\n    .filter((i) => b.stacks[i])\n    .filter((i) => notEnemyScorpion(b, index, i))\n    .filter((i) => !wouldBreakHive(b, [i]))\n}\n\nconst dragonfly = (b, piece_id, args) => {\n  const willSnag = (b, index, target) =>\n    b.stacks[index].length > 1 && !b.stacks[target] && !wouldBreakHive(b, [index], 2)\n  const index = b.reverse[piece_id]\n  const parity = mod(index, 2)\n  if (args.length === 0) {\n    const f = (i) => notEnemyScorpion(b, index, i)\n    const targets = b.geo.dindexes.dragonfly[parity].map((di) => index + di).filter(f)\n    markChalk(\n      b,\n      targets.filter((i2) => willSnag(b, index, i2)),\n      (s) => s + ' purple-inner',\n    )\n    return targets\n  }\n  return () => {\n    const target_index = args[0]\n    const chalk = {\n      from: index,\n      to: target_index,\n    }\n    if (willSnag(b, index, target_index)) {\n      b.stacks[target_index] = b.stacks[index].splice(-2, 2)\n      args.push(true)\n      chalk.stacks = [index, target_index]\n    } else {\n      move(b, index, target_index)\n    }\n    return chalk\n  }\n}\n\nconst mosquito = (b, piece_id, args) => {\n  const index = b.reverse[piece_id]\n  if (b.stacks[index].length > 1) {\n    // while on top of the hive, mosquito moves like a beetle\n    return []\n  }\n  const notMosquito = (b, i) => b.piece_types[last(b.stacks[i])] !== 'mosquito'\n\n  const target_indexes = b.geo.touching[index].filter((i) => b.stacks[i] && notMosquito(b, i))\n  if (args.length === 0) {\n    return target_indexes\n  }\n  if (args[0] === 'move') {\n    // redoing move\n    return () => move(b, index, args[1])\n  } else if (typeof args[0] === 'string') {\n    // redoing special\n    return _default[args[0]](b, piece_id, args[1])\n  }\n  const target_index = args[0]\n  const target_id = last(b.stacks[target_index])\n  const target_type = b.piece_types[target_id]\n  const possible_moves = moves_lib[target_type](b, index)\n  if (args.length === 2 && possible_moves.includes(args[1])) {\n    // piece chosen and move chosen, make move\n    return () => {\n      args[0] = 'move' // simplifies undo by not haivng to reverse what happened\n      move(b, index, args[1])\n    }\n  }\n  const f = _default[target_type]\n  const new_args = args.slice(1)\n  const special_result = f ? f(b, piece_id, new_args) : []\n  if (args.length === 1) {\n    // piece chosen only, return possible indexes for move and sepcial\n    markChalk(b, possible_moves, (s) => s.replace('yellow', '') + ' green')\n    return possible_moves.concat(special_result || [])\n  }\n  if (typeof special_result === 'function') {\n    // mosquito is doing a special of another piece\n    return () => {\n      // because specials (dragonfly) might mutate new_args, gotta reassemle args to be the right\n      const result = special_result()\n      while (args.length) {\n        args.pop()\n      }\n      args.push(target_type)\n      args.push(new_args)\n      return result\n    }\n  }\n  // special needs more arguments\n  return special_result\n}\n\nconst undoDragonfly = (b, piece_id, index, args) => {\n  const [target_index, moved_two] = args\n  b.stacks[index] = b.stacks[index] || []\n  if (moved_two) {\n    b.stacks[index] = b.stacks[index].concat(b.stacks[target_index].splice(-2, 2))\n  } else {\n    b.stacks[index].push(b.stacks[target_index].pop())\n  }\n}\n\nconst undoMoveUnder = (b, piece_id, index, args) => {\n  const target_id = b.stacks[index].shift()\n  b.stacks[args[0]] = b.stacks[args[0]] || []\n  b.stacks[args[0]].push(target_id)\n}\n\nconst _default = {\n  move,\n  selectNearby,\n  dragonfly,\n  damselfly: dragonfly,\n  dragonfly_nymph,\n  pill_bug,\n  orchid_mantis,\n  praying_mantis,\n  centipede,\n  mosquito,\n  earthworm,\n  kung_fu_mantis,\n  undo: {\n    mosquito: (b, piece_id, index, args) => {\n      if (args[0] === 'move') {\n        move(b, args[1], index)\n      } else {\n        _default.undo[args[0]](b, piece_id, index, args[1])\n      }\n    },\n    earthworm: (b, piece_id, index, args) => swapBottom(b, args[0], index),\n    pill_bug: (b, piece_id, index, args) => move(b, args[1], args[0]),\n    centipede: (b, piece_id, index, args) => swap(b, args[0], index),\n    orchid_mantis: undoMoveUnder,\n    kung_fu_mantis: undoMoveUnder,\n    praying_mantis: (b, piece_id, index, args) => {\n      const [target_index, snag_index] = args\n      move(b, target_index, index)\n      if (snag_index !== undefined) {\n        move(b, target_index, snag_index)\n      }\n    },\n    dragonfly: undoDragonfly,\n    dragonfly_nymph: (b, piece, index, args) => {\n      const f = args[1] === 'pulled' ? undoMoveUnder : undoDragonfly\n      return f(b, piece, index, args)\n    },\n    damselfly: undoDragonfly,\n  },\n}\n\nexport default _default\n","import { pick, last, cloneDeep } from 'lodash'\nimport { getGeo } from './Geo'\nimport objectHash from 'object-hash'\n\nimport wouldBreakHive from './wouldBreakHive'\nimport specials from './specials'\nimport moves from './moves'\nimport webs from './webs'\n\nconst board_cache = {}\nconst PLAYER_COUNT = 2\nconst noop = () => []\n\nconst B = {\n  moves,\n  specials,\n  wouldBreakHive,\n  PLAYER_COUNT,\n  getHash: (b) => objectHash(pick(b, ['stacks', 'piece_types', 'piece_owners', 'current_player'])),\n  update(b) {\n    window.b = b\n    if (b.reverse && B.getHash(b) === b.hash) {\n      return\n    }\n    // get derrived state of board\n    b.layers = {\n      type: {},\n      player: {},\n      stack: {},\n      crawl: {},\n      fly: {},\n    }\n    b.special_args = b.special_args || []\n    b.actions = b.actions || []\n    b.player_list = [1, 2]\n    b.reverse = {}\n    b.geo = getGeo(b)\n    Object.entries(b.stacks).forEach(([index, stack]) => {\n      if (!stack || stack.length === 0) {\n        // prune unused stacks\n        delete b.stacks[index]\n        return\n      }\n      stack.forEach((piece_id) => {\n        b.reverse[piece_id] = parseInt(index)\n        // these two only count for the last entry in stacks\n        b.layers.type[index] = b.piece_types[piece_id]\n        b.layers.player[index] = b.piece_owners[piece_id]\n      })\n      const piece_type = b.layers.type[index]\n      if (webs[piece_type]) {\n        webs[piece_type](b, index)\n      }\n    })\n\n    b.hash = B.current_hash = B.getHash(b)\n    B._markBoard(b)\n    let can_move\n    Object.values(b.stacks).forEach((stack) => {\n      const piece_id = stack[stack.length - 1]\n      if (b.piece_owners[piece_id] === b.current_player) {\n        if (B.getMoves(b, piece_id).length !== 0 || B.getSpecials(b, piece_id, []).length !== 0) {\n          can_move = true\n        }\n      }\n    })\n    const can_place = B.moves.getPlacement(b, b.current_player).length > 0\n    if (!(can_place || can_move)) {\n      b.error = `Skipped player ${b.current_player}'s turn because there are no legal moves`\n      B.nextPlayer(b)\n    }\n    B.checkWinner(b)\n  },\n  _markBoard: (b) => {\n    b.onehive = {} // index: would break hive if moved\n    b.cantmove = {} // same as onehive, except for orchid_mantis\n    b.empty = {} // empty but next to onehive\n    b.queens = {} // player: queen_index\n    Object.entries(b.stacks).forEach(([index, stack]) => {\n      index = parseInt(index)\n      const piece_id = last(stack)\n      const type = b.piece_types[piece_id]\n      if (wouldBreakHive(b, index)) {\n        b.onehive[index] = true\n        b.cantmove[index] = true\n      }\n\n      if (['orchid_mantis', 'kung_fu_mantis', 'dragonfly_nymph'].includes(type)) {\n        if (B.getSpecials(b, piece_id, []).length > 0) {\n          delete b.cantmove[index]\n        } else if (B.getMoves(b, piece_id).length === 0) {\n          b.cantmove[index] = true\n        }\n      }\n\n      if (type === 'pill_bug' && b.cantmove[index]) {\n        if (B.getSpecials(b, piece_id, []).length > 0) {\n          delete b.cantmove[index]\n        }\n      }\n\n      b.geo.touching[index].forEach((touched_index) => {\n        if (!b.stacks[touched_index]) {\n          b.empty[touched_index] = true\n        }\n      })\n    })\n    b.piece_types.forEach((type, id) => {\n      if (type === 'queen') {\n        b.queens[b.piece_owners[id]] = b.reverse[id]\n      }\n    })\n    if (Object.keys(b.empty).length === 0) {\n      b.empty[b.geo.center] = true\n    }\n  },\n\n  get: (room_id) => {\n    const b = board_cache[room_id]\n    if (b) {\n      board_cache[room_id] = b\n      B.update(b)\n    }\n    return b\n  },\n\n  _delete: (room_id) => delete board_cache[room_id],\n\n  getUrl: (b) => {\n    if (b.room_id === 'local' || !b.room_id) {\n      return '#/local/'\n    }\n    return `#/play/${b.room_id}/`\n  },\n  nextPlayer(b) {\n    b.current_player++\n    if (b.current_player > b.player_list.length) {\n      b.current_player = 1\n    }\n  },\n\n  prevPlayer(b) {\n    b.current_player--\n    if (b.current_player < b.player_list[0]) {\n      b.current_player = b.player_list[b.player_list.length - 1]\n    }\n  },\n\n  nextTurn: (b) => {\n    delete b.frozen // undo information is now lost (if it existed)\n    const last = b.actions[b.actions.length - 1]\n    b.turn++\n    const toggledCheat = last && last[0] === 'toggleCheat'\n\n    if (!toggledCheat) {\n      B.nextPlayer(b)\n      b.last_move_at = new Date().valueOf()\n    }\n\n    B.unselect(b)\n    B.update(b)\n  },\n\n  doAction: (b, args) => {\n    const action_type = args[0]\n    const index = args[1]\n    if (action_type === 'toggleCheat') {\n      b.rules.no_rules = !b.rules.no_rules\n    } else if (action_type === 'place') {\n      const piece_id = b.piece_types.length\n      const piece_type = args[2]\n      const player_id = args[3]\n      b.piece_types.push(piece_type)\n      b.piece_owners.push(player_id)\n      b.stacks[index] = b.stacks[index] || []\n      b.stacks[index].push(piece_id)\n      b.last = { to: index }\n    } else if (action_type === 'special') {\n      const piece_id = args[2]\n      const special_args = args[3]\n      const special = B.getSpecials(b, piece_id, special_args)\n      if (typeof special !== 'function') {\n        throw 'Attempting to doAction on an incomplete special'\n      }\n      b.last = special()\n    } else {\n      const new_index = args[2]\n      const piece_id = last(b.stacks[index])\n\n      b.stacks[index].pop()\n      b.stacks[new_index] = b.stacks[new_index] || []\n      b.stacks[new_index].push(piece_id)\n      b.last = {\n        from: index,\n        to: new_index,\n      }\n    }\n    b.actions.push(args)\n    B.nextTurn(b)\n  },\n\n  json_fields: [\n    'actions',\n    'id',\n    'W',\n    'H',\n    'stacks',\n    'piece_types',\n    'piece_owners',\n    'hash',\n    'turn',\n    'rules',\n    'winner',\n    'players',\n    'host',\n    'last',\n    'room_id',\n    'current_player',\n    'last_move_at',\n    'game_id',\n  ],\n  toJson: (b) => cloneDeep(pick(b, B.json_fields)),\n  fromJson: (board) => {\n    B.update(board)\n    return board\n  },\n  new: (options) => {\n    const board = {\n      // TODO issue #1\n      W: 50, // hex math only works with even boards\n      H: 50,\n      ...options,\n      piece_types: [],\n      piece_owners: [],\n      turn: 0,\n      actions: [],\n      current_player: 1,\n      last_move_at: new Date().valueOf(),\n    }\n    board.hash = B.getHash(board)\n    board.stacks = {}\n    B.update(board)\n    return board\n  },\n\n  getSpecials: (board, piece_id, args) => {\n    const type = board.piece_types[piece_id]\n\n    const f = specials[type] || noop\n    return f(board, piece_id, args)\n  },\n\n  getMoves: (board, piece_id) => {\n    const index = board.reverse[piece_id]\n    const type = board.piece_types[piece_id]\n\n    if (wouldBreakHive(board, index)) {\n      return []\n    }\n\n    const f = moves[type] || noop\n    return f(board, index)\n  },\n\n  unselect: (b) => {\n    B.update(b)\n    b.hash = B.getHash(b)\n    b.special_args = []\n    delete b.selected\n    delete b.error\n  },\n\n  select: (board, target) => {\n    const { selected = {} } = board\n    B.unselect(board)\n    const is_same =\n      selected.piece_id === target.piece_id && selected.piece_type === target.piece_type\n    if (target.piece_id === undefined || is_same) {\n      return\n    }\n    if (board.cantmove[target.index]) {\n      board.error = 'Moving this piece would break the hive.'\n    }\n    board.selected = pick(target, ['player_id', 'piece_id', 'piece_type', 'index'])\n  },\n  freeze: (b) => {\n    b.frozen = b.frozen || B.toJson(b)\n  },\n  undo: (b) => {\n    if (b.actions.length === 0) {\n      return\n    }\n    delete b.last\n    B.freeze(b)\n    const move = b.actions.pop()\n    if (move[0] === 'special') {\n      const [_, index, piece_id, special_args] = move\n      const piece_type = b.piece_types[piece_id]\n      specials.undo[piece_type](b, piece_id, index, special_args)\n    } else if (move[0] === 'place') {\n      b.piece_types.pop()\n      b.piece_owners.pop()\n      b.stacks[move[1]].pop()\n    } else {\n      // move[0] === 'move'\n      // using specials.move here because it doesn't increment turn\n      const [_, old_index, new_index] = move\n      specials.move(b, new_index, old_index)\n    }\n    b.turn--\n    B.prevPlayer(b)\n    B.update(b)\n  },\n  redo: (b) => {\n    const { frozen } = b\n    if (!frozen || frozen.actions.length === b.turn) {\n      return\n    }\n    B.doAction(b, b.frozen.actions[b.turn])\n\n    // nextTurn removes frozen, but because this is redo we didn't break the undo chain\n    b.frozen = frozen\n  },\n\n  isUsersTurn: (board) => {\n    if (!board.players) {\n      return true\n    }\n    return board.current_player === board.local_player\n  },\n\n  click: (board, target) => {\n    const { rules, selected } = board\n    const { player_id, piece_type } = selected || {}\n    if (selected && rules.no_rules && target.index !== undefined) {\n      if (selected.piece_id === 'new') {\n        B.doAction(board, ['place', target.index, piece_type, player_id])\n      } else {\n        B.doAction(board, ['move', selected.index, target.index])\n      }\n      return\n    }\n    if (\n      !selected || // no tile currently selected\n      player_id !== board.current_player || // currently selected enemy piece\n      target.piece_id === 'new' || // clicked sidebar\n      board.cantmove[selected.index] || // onehive or orchid_mantis/pillbug logic\n      !B.isUsersTurn(board) // for remote multiplayer\n    ) {\n      // currently selected an enemy piece, select new target piece instead\n      B.select(board, target)\n      return\n    }\n\n    if (selected.piece_id === 'new') {\n      const placements = B.moves.getPlacement(board, player_id)\n      if (placements.includes(target.index)) {\n        B.queenCheck(board) && B.doAction(board, ['place', target.index, piece_type, player_id])\n      } else {\n        B.select(board, target)\n      }\n      return\n    }\n\n    let special = B.getSpecials(board, selected.piece_id, board.special_args)\n    if (special.includes(target.index)) {\n      board.special_args.push(target.index)\n      special = B.getSpecials(board, selected.piece_id, board.special_args)\n      if (typeof special === 'function') {\n        const index = board.reverse[selected.piece_id]\n        B.doAction(board, ['special', index, selected.piece_id, board.special_args])\n      }\n      return\n    }\n\n    const moves = B.getMoves(board, selected.piece_id)\n    if (moves.includes(target.index)) {\n      if (!B.queenCheck(board)) {\n        board.error = 'You must place your queen before the 4th turn'\n      } else if (!board.queens[board.current_player]) {\n        board.error = 'You cannot move any piece before placing your queen'\n      } else {\n        B.doAction(board, ['move', selected.index, target.index])\n      }\n      return\n    }\n\n    // fallback to selecting square if nothing else happened\n    B.select(board, target)\n  },\n\n  error: (board, message) => {\n    board.error = message\n  },\n\n  queenCheck: (board) => {\n    if (board.selected.piece_type === 'queen' || board.rules.no_rules) {\n      // placing or moving queen, don't check anything else\n      return true\n    }\n    const fail1 = board.turn === 6 && board.queens[1] === undefined\n    const fail2 = board.turn === 7 && board.queens[2] === undefined\n    if (fail1 || fail2) {\n      B.error(board, 'You must place your queen on or before the 4th turn')\n      return false\n    }\n    return true\n  },\n\n  deletePiece: (board, trash_id) => {\n    // remove from arrays\n    board.piece_types.splice(trash_id, 1)\n    board.piece_owners.splice(trash_id, 1)\n    Object.entries(board.stacks).forEach(([_, stack]) => {\n      stack.forEach((piece_id, i) => {\n        if (piece_id === trash_id) {\n          stack.splice(i, 1)\n        }\n      })\n      stack.forEach((piece_id, i) => {\n        if (piece_id > trash_id) {\n          stack[i] -= 1\n        }\n      })\n    })\n    B.unselect(board)\n    B.update(board)\n  },\n\n  checkWinner: (b) => {\n    if (b.winner !== undefined) {\n      return\n    }\n    const winners = b.player_list.filter((player_id) => {\n      const index = b.queens[player_id === 1 ? 2 : 1]\n      return index !== undefined && b.geo.touching[index].filter((i2) => b.stacks[i2]).length === 6\n    })\n    b.winner = winners.length === 2 ? 'tie' : winners[0]\n  },\n}\n\nexport default B\n","/* Renders the board into a state that can be displayed */\nimport { range } from 'lodash'\nimport pieces from '../pieces'\nimport Board from './index'\nimport webs from './webs'\n\nconst _class = (p, t, s) => `piece hex-player_${p} type type-${t} hex -stacked-${s}`\nconst empty = (board, index) => {\n  const cls = 'piece hex'\n  if (!board.empty[index]) {\n    // hexes far away from the hive are \"invisible\"\n    return cls\n  }\n  const colors = ['r', 'g', 'b', 'r']\n  const r_i = (board.geo.index2xy(index)[1] % 3) + (index % 2)\n  return cls + ' hex-empty_' + colors[r_i]\n}\n\nconst sliceBoard = (board) => {\n  let max_x = -Infinity,\n    max_y = -Infinity,\n    min_x = Infinity,\n    min_y = Infinity\n  const indexes = Object.keys(board.stacks)\n  if (indexes.length === 0) {\n    indexes.push(board.geo.center)\n  }\n  indexes\n    .map((index) => parseInt(index))\n    .forEach((index) => {\n      const xy = board.geo.index2xy(index)\n      max_x = Math.max(max_x, xy[0] + 1)\n      max_y = Math.max(max_y, xy[1] + 1)\n      min_x = Math.min(min_x, xy[0] - 1)\n      min_y = Math.min(min_y, xy[1] - 1)\n    })\n  if (min_x % 2 !== 0) {\n    min_x -= 1\n  }\n  return range(min_y, max_y + 1).map((y) =>\n    range(min_x, max_x + 1).map((x) => ({\n      index: board.geo.xy2index([x, y]),\n      xy: [x, y],\n    })),\n  )\n}\n\nexport const makeStack = (board, index) => {\n  const stack = board.stacks[index]\n  if (!stack) {\n    return [empty(board, index)]\n  }\n  return stack.map((piece_id, stack_index) => {\n    if (stack.length > 4) {\n      stack_index = stack_index - stack.length + 4\n    }\n    const type = board.piece_types[piece_id]\n    const player = board.piece_owners[piece_id]\n    return _class(player, type, stack_index)\n  })\n}\n\nexport default (board, { columns = 1 } = {}) => {\n  const marked = getMarked(board)\n  const { selected = {} } = board\n  if (selected.index !== undefined) {\n    marked[selected.index] = ' purple'\n  } else if (selected.piece_id !== 'new' && board.last) {\n    if (board.last.from) {\n      marked[board.last.from] = ' blue-dashed'\n    }\n    if (board.last.to) {\n      marked[board.last.to] = ' blue'\n    }\n    if (board.last.special) {\n      marked[board.last.special] = ' yellow'\n    }\n    board.last.stacks?.forEach((index) => {\n      marked[index] += ' purple-inner'\n    })\n  }\n\n  const show_webs = webs.getVisible(board, selected.index)\n  const rows = sliceBoard(board)\n  rows.forEach((row) =>\n    row.forEach((cell) => {\n      cell.stack = makeStack(board, cell.index)\n      cell.selected = cell.index === selected.index\n      const stack = board.stacks[cell.index]\n      if (stack) {\n        const piece_id = stack[stack.length - 1]\n        cell.piece_id = piece_id\n        cell.player_id = board.piece_owners[piece_id]\n        cell.piece_type = board.piece_types[piece_id]\n      }\n      show_webs.forEach((web) => {\n        if (!board.layers[web][cell.index]) {\n          return // no webs\n        }\n        if (web === 'stack' && selected.player_id === board.layers.player[cell.index]) {\n          return\n        }\n        if (web === 'crawl') {\n          if (board.stacks[cell.index] && cell.index !== selected.index) {\n            // only show crawl web on the selected piece or empty squares\n            return\n          }\n          const enemy_webs = board.layers[web][cell.index].filter(\n            (i) => selected.player_id !== board.layers.player[i],\n          )\n          if (enemy_webs.length === 0) {\n            return\n          }\n\n          const selected_webs = board.layers.crawl[selected.index] || []\n          if (enemy_webs.find((i) => selected_webs.includes(i)) !== undefined) {\n            web = 'crawl-gray'\n          }\n        }\n        cell.title = webs.title[web](selected.piece_type)\n        cell.web = web\n      })\n      if (marked[cell.index]) {\n        const _i = cell.stack.length - 1\n        cell.stack[_i] = cell.stack[_i] + marked[cell.index]\n      }\n    }),\n  )\n\n  const players = {\n    1: [],\n    2: [],\n  }\n\n  pieces.getAvailable(board).forEach(({ player_id, type, count }) => {\n    player_id = parseInt(player_id)\n    const cell = {\n      stack: range(count).map((i) => _class(player_id, type, i)),\n      player_id,\n      piece_id: 'new',\n      piece_type: type, // TODO remove drag and drop and then this can be type\n      type: 'cell',\n    }\n    if (\n      selected.piece_id === 'new' &&\n      selected.piece_type === type &&\n      player_id === selected.player_id\n    ) {\n      const _i = cell.stack.length - 1\n      cell.stack[_i] = cell.stack[_i] + ' purple'\n    }\n    players[player_id].push(cell)\n  })\n\n  return {\n    rows,\n    player_1: columnize(players[1], columns),\n    player_2: columnize(players[2], columns),\n  }\n}\n\nconst columnize = (cells, columns) => {\n  const out = []\n  let row = []\n  out.push(row)\n  while (cells.length) {\n    row.push(cells.shift())\n    if (row.length === columns) {\n      row = []\n      out.push(row)\n    }\n  }\n  return out\n}\n\nconst getMarked = (board) => {\n  const { selected } = board\n  const marked = {}\n  Object.keys(board.cantmove).forEach((index) => (marked[index] = ' gray'))\n\n  if (!selected) {\n    return marked\n  }\n\n  const { piece_id, player_id } = selected\n\n  const color = board.current_player === player_id ? ' green' : ' red'\n  let indexes = []\n  if (piece_id === 'new') {\n    indexes = Board.moves.getPlacement(board, player_id)\n  } else {\n    const specials = Board.getSpecials(board, piece_id, board.special_args)\n    specials.forEach((i) => (marked[i] = ' yellow'))\n    if (board.special_args.length === 0) {\n      indexes = Board.getMoves(board, piece_id)\n    }\n    if (selected.chalk) {\n      Object.entries(selected.chalk).forEach(\n        ([index, f]) => (marked[index] = f(marked[index] || '')),\n      )\n    }\n  }\n  indexes.forEach((i) => (marked[i] = color))\n  return marked\n}\n","<template>\n  <div :class=\"css.root\" :style=\"css.style\">\n    <div v-for=\"(row, ir) in rows\" :key=\"ir\" class=\"row\">\n      <div v-for=\"(cell, ic) in row\" :key=\"ic\" :class=\"css.cell(cell)\">\n        <div class=\"content\" :data-web=\"cell.web\" :title=\"cell.title\">\n          <div\n            v-for=\"(tile, iz) in cell.stack\"\n            :key=\"iz\"\n            @click=\"$emit('clickPiece', cell)\"\n            :class=\"tile\"\n            :data-index=\"cell.index\"\n            :data-xy=\"cell.xy\"\n            :data-piece_id=\"cell.piece_id\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    rows: Array,\n  },\n  emits: ['clickPiece'],\n  computed: {\n    css() {\n      const { theme, hex_angle, zoom } = this.$store.config.state\n      return {\n        root: `zoom-${zoom} hex-grid hex-${hex_angle} theme-${theme}`,\n        style: { '--columns': this.rows[0].length },\n        cell: ({ selected }) => ['item', { selected }],\n        tile: (cell, tile) => tile,\n      }\n    },\n  },\n}\n</script>\n","import { render } from \"./Board.vue?vue&type=template&id=2933f8d7\"\nimport script from \"./Board.vue?vue&type=script&lang=js\"\nexport * from \"./Board.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"!show_help\" class=\"fixed left-0 bottom-0 m-4 HelpText\">\n    <div @click=\"toggle\" :class=\"css.button('circle')\">\n      <i :class=\"css.icon('question')\" />\n    </div>\n  </div>\n  <div v-else-if=\"!board.selected\" class=\"fixed left-0 bottom-0 m-4 HelpText\">\n    <div :class=\"css.alert.info()\">Select a Tile</div>\n  </div>\n  <div v-else class=\"fixed left-0 bottom-0 HelpText\">\n    <div :class=\"css.alert.info()\">\n      <div>\n        <ul class=\"browser-default\">\n          <li v-for=\"item in items\" :key=\"item\">{{ item }}</li>\n        </ul>\n        <div>\n          <button @click=\"unselect\" :class=\"css.button('mr-2')\">\n            Deselect\n          </button>\n          <button @click=\"toggle\" :class=\"css.button()\">\n            Hide Help\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nimport help from 'hive.js/help'\nimport B from 'hive.js/Board'\n\nconst PLACEMENT =\n  'PLACEMENT: Place this piece in any empty space that only touches friendly tiles. After placed, this pieces moves are:'\n\nexport default {\n  props: {\n    board: Object,\n  },\n  computed: {\n    css: () => css,\n    show_help() {\n      return this.$store.config.state.show_help\n    },\n    items() {\n      const { board } = this\n      const { piece_id, piece_type } = board.selected\n      const items = help[piece_type].map((i) => (typeof i === 'function' ? i(board) : i))\n      if (piece_id === 'new') {\n        items.unshift(PLACEMENT)\n      }\n      return items\n    },\n  },\n  methods: {\n    unselect() {\n      B.unselect(this.board)\n    },\n    toggle() {\n      this.$store.config.save({ show_help: !this.show_help })\n    },\n  },\n}\n</script>\n","import { render } from \"./HelpText.vue?vue&type=template&id=121f939a\"\nimport script from \"./HelpText.vue?vue&type=script&lang=js\"\nexport * from \"./HelpText.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"deleteSelected\">\n    <button :class=\"css.button.error()\" @click=\"deleteSelected\">\n      Delete selected\n    </button>\n  </div>\n  <span v-else @click=\"click\" :class=\"css.alert.warning('cursor-pointer')\">\n    \\_()_/ No Rules\n  </span>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nexport default {\n  props: {\n    deleteSelected: Function,\n  },\n  data() {\n    return { css, open: false }\n  },\n  methods: {\n    click() {\n      this.$ui.alert({\n        title: 'No Rules Mode',\n        text:\n          'This game was created with rules off. The board will still display legal moves for a selected piece, but pieces can be moved anywhere whether the rules allow it or not.',\n      })\n    },\n  },\n}\n</script>\n","import { render } from \"./NoRules.vue?vue&type=template&id=068be43e\"\nimport script from \"./NoRules.vue?vue&type=script&lang=js\"\nexport * from \"./NoRules.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <span>{{ text }}</span>\n</template>\n\n<script>\nconst fmt = (num) => num.toString().padStart(2, '0')\n\nexport default {\n  props: {\n    time: Number,\n  },\n  data() {\n    return { text: '00:00', timeout: null }\n  },\n  mounted() {\n    this.timeout = setTimeout(this.step, 1000)\n  },\n  unmounted() {\n    clearTimeout(this.timeout)\n  },\n  methods: {\n    step() {\n      clearTimeout(this.timeout)\n      this.tick++\n      this.timeout = setTimeout(this.step, this.tick > 60 ? 60000 : 1000)\n      const seconds = Math.floor((new Date().valueOf() - this.time) / 1000)\n      if (isNaN(this.time)) {\n        return\n      }\n      const s = seconds % 60\n      const m = Math.floor(seconds / 60)\n      this.text = `${fmt(m)}:${fmt(s)}`\n    },\n  },\n}\n</script>\n","import { render } from \"./TimeSince.vue?vue&type=template&id=405525c0\"\nimport script from \"./TimeSince.vue?vue&type=script&lang=js\"\nexport * from \"./TimeSince.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div :class=\"css.alert.info('cursor-pointer')\" @click=\"open = true\">\n    {{ text }}\n  </div>\n  <unrest-modal v-if=\"open\" class=\"text-center\" :close=\"() => (open = false)\">\n    <h2>{{ text }}</h2>\n    <template #actions>\n      <button :class=\"css.button()\" @click=\"open = false\">\n        Keep Playing\n      </button>\n      <button v-if=\"can_end\" :class=\"css.button()\" @click=\"send('reset_game')\">\n        Play Again\n      </button>\n    </template>\n  </unrest-modal>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nexport default {\n  props: {\n    board: Object,\n    room: Object,\n  },\n  data() {\n    return { open: true, css }\n  },\n  computed: {\n    text() {\n      const { winner } = this.board\n      return winner === 'tie' ? 'The game is a draw' : `Player ${winner} has won the game.`\n    },\n    can_end() {\n      return this.$store.room.isHost(this.room.id)\n    },\n  },\n  methods: {\n    send(action) {\n      this.$store.room.send(this.room.id, action)\n    },\n  },\n}\n</script>\n","import { render } from \"./Winner.vue?vue&type=template&id=bc57ce36\"\nimport script from \"./Winner.vue?vue&type=script&lang=js\"\nexport * from \"./Winner.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Game.vue?vue&type=template&id=7489ee7e\"\nimport script from \"./Game.vue?vue&type=script&lang=js\"\nexport * from \"./Game.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./OnlineRoom.vue?vue&type=template&id=25952b88\"\nimport script from \"./OnlineRoom.vue?vue&type=script&lang=js\"\nexport * from \"./OnlineRoom.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import About from './About'\nimport Home from './Home'\nimport ChangeLog from './ChangeLog'\nimport NewGameRedirect from './NewGameRedirect'\nimport OnlineRoom from './OnlineRoom'\n\nexport default { About, Home, ChangeLog, NewGameRedirect, OnlineRoom }\n","import { defaultsDeep } from 'lodash'\nimport { createRouter, createWebHistory, createWebHashHistory } from 'vue-router'\n\nimport sprite from '@/sprite'\nimport applyMeta from './applyMeta'\nimport views from '@/views'\nimport auth from '@unrest/vue-auth'\n\nconst routes = [...auth.routes]\n\nconst loadViews = (o) =>\n  Object.entries(o).forEach(([component_name, Component]) => {\n    const route = {\n      name: component_name.toLowerCase(),\n      path: `/${component_name.toLowerCase()}`,\n      component: Component,\n    }\n    Object.assign(route, Component.__route)\n    defaultsDeep(route, { meta: { title: component_name } })\n    routes.push(route)\n  })\n\nloadViews(views)\nloadViews(sprite.views)\nconst createHistory = process.env.VUE_APP_OFFLINE ? createWebHashHistory : createWebHistory\n\nconst router = createRouter({\n  history: createHistory(),\n  routes,\n})\n\nrouter.beforeEach(applyMeta)\nrouter.beforeEach(() => {\n  // refresh any api calls after navigation\n})\nexport default router\n","import { reactive } from 'vue'\nimport unrest from '@unrest/vue'\nimport ls from 'local-storage-json'\nimport { getClient } from '@unrest/vue-storage'\n\nimport router from '@/router'\nimport B from 'hive.js/Board'\n\nconst TIMEOUTS = {}\nconst SOCKETS = {}\nconst BOARDS = {}\nconst LOCAL_GAME_KEY = 'local_storage_game'\nconst client = getClient()\n\nconst state = reactive({\n  current_room: null,\n  rooms: {},\n})\n\nconst { ui } = unrest\n\nexport default ({ store }) => {\n  SOCKETS.local = {\n    send(json_data) {\n      const { action, content } = JSON.parse(json_data)\n      const room = state.rooms.local\n      if (action === 'set_rules') {\n        room.state.rules = content\n      } else if (action === 'start_game') {\n        delete BOARDS.local\n        room.board = BOARDS.local = B.new({\n          rules: room.state.rules,\n          game_id: 'local',\n          rooom_id: 'local',\n        })\n        ls.set(LOCAL_GAME_KEY, B.toJson(room.board))\n      } else if (action === 'change_pieces') {\n        delete BOARDS.local\n        delete room.board\n      }\n    },\n  }\n\n  const watchRoom = (room_id) => {\n    state.current_room = room_id\n    if (room_id === 'local') {\n      if (!state.rooms.local) {\n        const b = ls.get(LOCAL_GAME_KEY)\n        state.rooms.local = {\n          id: room_id,\n          state: { rules: b && b.rules },\n          board: b && B.fromJson(b),\n        }\n      }\n      return state.rooms.local\n    }\n    clearTimeout(TIMEOUTS[room_id])\n    if (SOCKETS[room_id]) {\n      return state.rooms[room_id]\n    }\n    const protocol = window.location.protocol === 'https:' ? 'wss' : 'ws'\n    const url = `${protocol}://${window.location.host}/ws/chat/${room_id}/`\n    const ws = (SOCKETS[room_id] = new WebSocket(url))\n    ws.__ticks = 0\n    ws.onclose = () => {\n      const room = state.rooms[room_id] || {}\n      delete SOCKETS[room_id]\n      room.disconnected = true\n      TIMEOUTS[room_id] = setTimeout(() => {\n        watchRoom(room_id)\n        room.reconnect_tries = (room.reconnect_tries || 0) + 1\n      }, 5000)\n    }\n    ws.onmessage = (e) => {\n      const room = (state.rooms[room_id] = JSON.parse(e.data))\n      if (room.error === 404) {\n        room.state = {}\n        ui.alert({\n          title: 'Unable to find room',\n          confirm: () => (window.location = '/'),\n        })\n        return\n      }\n      room.ticks = ws.__ticks++\n      if (room.game_id && !BOARDS[room.game_id]) {\n        const board = (BOARDS[room.game_id] = B.new(room.game))\n        board.local_player = parseInt(\n          Object.keys(board.players).find((key) => {\n            return board.players[key] === store.auth.user.id\n          }),\n        )\n      }\n      room.board = BOARDS[room.game_id]\n      sync(room_id)\n    }\n    return state.rooms[room_id]\n  }\n\n  const sendRoom = (room_id, action, content) => {\n    if (action === 'reset_game') {\n      action = 'start_game' // alias\n    }\n    SOCKETS[room_id].send(JSON.stringify({ action, content }))\n  }\n\n  const sync = (room_id) => {\n    const room = state.rooms[room_id]\n    if (room_id === 'local') {\n      ls.set(LOCAL_GAME_KEY, B.toJson(room.board))\n      return\n    }\n    if (!room.game) {\n      return\n    }\n    const board = room.board\n    const remote_actions = room.game.actions\n    const diff = remote_actions.length - board.actions.length\n    if (diff < -1) {\n      console.error(room.game.actions, board.actions)\n      throw 'Game too far out of sync with server'\n    }\n    if (diff === -1) {\n      sendRoom(room_id, 'action', {\n        hash: board.hash,\n        action: board.actions[board.actions.length - 1],\n        action_count: board.actions.length,\n      })\n    }\n    while (remote_actions.length > board.actions.length) {\n      B.doAction(board, remote_actions[board.actions.length])\n    }\n  }\n\n  const onlyIfLocal = (room_id, action) => {\n    const { board } = state.rooms[room_id] || {}\n    if (!board) {\n      return\n    }\n    if (room_id === 'local') {\n      B[action](board)\n    } else {\n      ui.toast(`Can only ${action} in local games.`)\n    }\n  }\n\n  const room_store = {\n    state,\n    undo: (room_id) => onlyIfLocal(room_id, 'undo'),\n    redo: (room_id) => onlyIfLocal(room_id, 'redo'),\n    watch: watchRoom,\n    send: sendRoom,\n    sync,\n    save: () => client.post('/room/'),\n    isHost: (room_id) => {\n      return room_id === 'local' || state.rooms[room_id]?.state.host_id === store.auth.user?.id\n    },\n    loadJson: (value) => {\n      const room = watchRoom('local')\n      try {\n        if (typeof value === 'string') {\n          value = JSON.parse(value)\n        }\n        room.board = B.fromJson(value)\n        room.state.rules = room.board.rules\n        router.push('/play/local')\n        ui.toast('Local game loaded')\n        ui.alert(null)\n      } catch (e) {\n        const error = 'An unknown error occurred. Unable to parse game.'\n        ui.alert(error)\n      }\n    },\n  }\n\n  return room_store\n}\n","import config from './config'\nimport room from './room'\n\nconst store = {\n  list: [],\n  install: (app, _options) => {\n    app.config.globalProperties.$store = store\n    store.list.forEach((m) => m.init?.())\n  },\n}\n\nconst modules = {\n  config,\n  room,\n}\n\nObject.entries(modules).forEach(([name, module]) => {\n  store[name] = module({ store })\n  store.list.push(store[name])\n})\n\nexport default store\n","<template>\n  <Nav />\n  <router-view :class=\"`router-view ${debug ? 'debug' : ''}`\" />\n  <unrest-ui />\n</template>\n\n<script>\nimport Nav from '@/components/Nav'\n\nexport default {\n  name: 'App',\n  components: { Nav },\n  computed: {\n    debug() {\n      return this.$store.config.state.debug\n    },\n  },\n}\n</script>\n","<template>\n  <header :class=\"css.nav.outer()\">\n    <section :class=\"css.nav.section('left')\">\n      <router-link to=\"/\" :class=\"css.nav.brand()\"> Hive! </router-link>\n    </section>\n    <section :class=\"css.nav.section('flex items-center')\" v-if=\"$auth.ready\">\n      <unrest-dropdown v-if=\"game_links.length\" :items=\"game_links\" placement=\"bottom\">\n        <div class=\"ur-dropdown__trigger\">game</div>\n      </unrest-dropdown>\n      <unrest-dropdown placement=\"bottom\">\n        <div class=\"ur-dropdown__trigger\">config</div>\n        <template #content>\n          <div class=\"dropdown-menu\" @click.stop>\n            <unrest-form v-bind=\"$store.config.form\">\n              <template #actions>{{ ' ' }}</template>\n            </unrest-form>\n          </div>\n        </template>\n      </unrest-dropdown>\n      <unrest-dropdown :items=\"help_links\" placement=\"bottom\">\n        <div class=\"ur-dropdown__trigger\">help</div>\n      </unrest-dropdown>\n      <unrest-auth-menu />\n    </section>\n  </header>\n</template>\n\n<script>\nimport css from '@unrest/css'\n\nconst help_links = [\n  { to: '/about/', text: 'About' },\n  { to: '/change-log/', text: 'Change Log' },\n]\n\nexport default {\n  data() {\n    return { css, help_links }\n  },\n  computed: {\n    game_links() {\n      const { room_id } = this.$route.params\n      const warn = (action) => {\n        const confirm = () => {\n          this.$store.room.send(this.$route.params.room_id, action)\n          this.$ui.alert(null)\n        }\n        return this.$ui.alert({\n          title: action[0].toUpperCase() + action.slice(1).replace('_', ' '),\n          text: 'This action cannot be undone. Are you sure?',\n          actions: [\n            { class: 'btn -secondary', text: 'Cancel', click: () => this.$ui.alert(null) },\n            { class: 'btn -primary', text: 'Confirm', click: confirm },\n          ],\n        })\n      }\n      const items = [\n        { text: 'Reset Game', click: () => warn('reset_game') },\n        { text: 'Change Pieces', click: () => warn('change_pieces') },\n        { text: 'Import Game', click: this.showImportModal },\n        { text: 'Export Game', click: this.showExportModal },\n        { text: 'Undo (ctrl+z)', click: () => this.$store.room.undo(room_id) },\n        { text: 'Redo (ctrl+y)', click: () => this.$store.room.redo(room_id) },\n      ]\n      const disable = (item) => {\n        delete item.click\n        item.class = 'disabled'\n      }\n      if (!this.$store.room.isHost(room_id)) {\n        disable(items[0])\n        disable(items[1])\n      }\n      if (!this.$store.room.state.rooms[room_id]?.board) {\n        disable(items[3])\n        disable(items[4])\n        disable(items[5])\n      }\n      return items\n    },\n  },\n  methods: {\n    showImportModal() {\n      this.$ui.alert({ tagName: 'import-game' })\n    },\n    showExportModal() {\n      this.$ui.alert({ tagName: 'export-game', width: 420 })\n    },\n  },\n}\n</script>\n","import { render } from \"./Nav.vue?vue&type=template&id=d0a202da\"\nimport script from \"./Nav.vue?vue&type=script&lang=js\"\nexport * from \"./Nav.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=2aeb85af\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <p>\n      Paste the serialized version of a game to load it.\n    </p>\n    <div>\n      <textarea @paste=\"paste\" style=\"width: 100%\" ref=\"textarea\" />\n    </div>\n    <div class=\"modal-footer\">\n      <button class=\"btn -primary\" @click=\"$ui.alert()\">\n        Cancel\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  mounted() {\n    this.$refs.textarea.focus()\n  },\n  methods: {\n    paste(e) {\n      this.$store.room.loadJson(e.clipboardData.getData('text'))\n    },\n  },\n}\n</script>\n","import { render } from \"./ImportGame.vue?vue&type=template&id=936dcd1c\"\nimport script from \"./ImportGame.vue?vue&type=script&lang=js\"\nexport * from \"./ImportGame.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <p>\n      The string below represents the current game state. Please use it to report bugs or if you\n      want to reload a previous game.\n    </p>\n    <unrest-form :schema=\"schema\" :state=\"state\">\n      <template #actions>{{ ' ' }}</template>\n    </unrest-form>\n    <textarea :value=\"game_string\" cols=\"36\" rows=\"10\" />\n    <div class=\"modal-footer flex\">\n      <button class=\"btn -primary\" @click=\"copy\"><i class=\"fa fa-clipboard\" /> Copy</button>\n      <div class=\"flex-grow\" />\n      <button class=\"btn -primary\" @click=\"$emit('close')\">\n        Close\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport B from 'hive.js/Board'\n\nexport default {\n  emits: ['close'],\n  data() {\n    return { state: {} }\n  },\n  computed: {\n    game_string() {\n      const { room_id } = this.$route.params\n      const json = B.toJson(this.$store.room.state.rooms[room_id].board)\n      Object.entries(this.state).forEach(([key, value]) => {\n        if (!value) {\n          delete json[key]\n        }\n      })\n      return JSON.stringify(json)\n    },\n    schema() {\n      return {\n        type: 'lazy',\n        actions: true,\n      }\n    },\n  },\n  methods: {\n    copy() {\n      navigator.clipboard.writeText(this.game_string)\n    },\n  },\n}\n</script>\n","import { render } from \"./ExportGame.vue?vue&type=template&id=06e9d7c6\"\nimport script from \"./ExportGame.vue?vue&type=script&lang=js\"\nexport * from \"./ExportGame.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport Form from '@unrest/vue-form'\nimport UrVue from '@unrest/vue'\nimport '@unrest/tailwind/dist.css'\n\nimport autoscroll from '@/autoscroll'\nimport auth from '@unrest/vue-auth' // TODO move into new app @unrest/vue-auth\nimport chat from '@/chat'\nimport store from '@/store'\nimport router from '@/router'\nimport App from '@/App.vue'\nimport ImportGame from '@/components/ImportGame'\nimport ExportGame from '@/components/ExportGame'\nimport '@/styles/base.scss'\n\nauth.configure({\n  AUTH_START: '/',\n  oauth_providers: ['twitter', 'github'],\n  enabled: !process.env.VUE_APP_OFFLINE,\n})\n\nconst app = createApp(App)\napp.component('ImportGame', ImportGame)\napp.component('ExportGame', ExportGame)\napp.directive('autoscroll', autoscroll)\napp.use(router)\napp.use(store)\napp.use(UrVue.plugin)\napp.use(UrVue.ui)\napp.use(chat)\napp.use(Form.plugin)\napp.use(auth.plugin) // must come after store!\n\napp.mount('#app')\n"],"sourceRoot":""}